{"ast":null,"code":"function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nimport React, { forwardRef, useContext, useEffect, useRef, useState } from 'react';\nimport styled, { ThemeContext } from 'styled-components';\nimport { defaultProps } from '../../default-props';\nimport { FocusedContainer } from '../FocusedContainer';\nimport { Keyboard } from '../Keyboard';\nimport { backgroundIsDark, findVisibleParent } from '../../utils';\nimport { StyledLayer, StyledContainer, StyledOverlay } from './StyledLayer';\nvar HiddenAnchor = styled.a.withConfig({\n  displayName: \"LayerContainer__HiddenAnchor\",\n  componentId: \"sc-1srj14c-0\"\n})([\"width:0;height:0;overflow:hidden;position:absolute;\"]);\nvar fullBounds = {\n  left: 0,\n  right: 0,\n  top: 0,\n  bottom: 0\n};\nvar LayerContainer = /*#__PURE__*/forwardRef(function (_ref, ref) {\n  var children = _ref.children,\n      _ref$full = _ref.full,\n      full = _ref$full === void 0 ? false : _ref$full,\n      id = _ref.id,\n      _ref$margin = _ref.margin,\n      margin = _ref$margin === void 0 ? 'none' : _ref$margin,\n      _ref$modal = _ref.modal,\n      modal = _ref$modal === void 0 ? true : _ref$modal,\n      onClickOutside = _ref.onClickOutside,\n      onEsc = _ref.onEsc,\n      plain = _ref.plain,\n      _ref$position = _ref.position,\n      position = _ref$position === void 0 ? 'center' : _ref$position,\n      _ref$responsive = _ref.responsive,\n      responsive = _ref$responsive === void 0 ? true : _ref$responsive,\n      layerTarget = _ref.target,\n      rest = _objectWithoutPropertiesLoose(_ref, [\"children\", \"full\", \"id\", \"margin\", \"modal\", \"onClickOutside\", \"onEsc\", \"plain\", \"position\", \"responsive\", \"target\"]);\n\n  var theme = useContext(ThemeContext) || defaultProps.theme;\n\n  var _useState = useState(fullBounds),\n      targetBounds = _useState[0],\n      setTargetBounds = _useState[1];\n\n  var anchorRef = useRef();\n  var containerRef = useRef();\n  var layerRef = useRef();\n  useEffect(function () {\n    if (position !== 'hidden') {\n      var node = layerRef.current || containerRef.current || ref.current;\n      if (node && node.scrollIntoView) node.scrollIntoView(); // Once layer is open we make sure it has focus so that you\n      // can start tabbing inside the layer. If the caller put focus\n      // on an element already, we honor that. Otherwise, we put\n      // the focus in the hidden anchor.\n\n      var element = document.activeElement;\n\n      while (element) {\n        if (element === containerRef.current) {\n          // already have focus inside the container\n          break;\n        }\n\n        element = element.parentElement;\n      }\n\n      if (modal && !element && anchorRef.current) {\n        anchorRef.current.focus();\n      }\n    }\n  }, [modal, position, ref]);\n  useEffect(function () {\n    if (position !== 'hidden') {\n      var node = layerRef.current || containerRef.current || ref.current;\n      if (node && node.scrollIntoView) node.scrollIntoView();\n    }\n  }, [position, ref]);\n  useEffect(function () {\n    if (layerTarget) {\n      var updateBounds = function updateBounds() {\n        var rect = findVisibleParent(layerTarget).getBoundingClientRect();\n        setTargetBounds({\n          left: rect.left,\n          right: window.innerWidth - rect.right,\n          top: rect.top,\n          bottom: window.innerHeight - rect.bottom\n        });\n      };\n\n      updateBounds();\n      window.addEventListener('resize', updateBounds);\n      return function () {\n        return window.removeEventListener('resize', updateBounds);\n      };\n    }\n\n    setTargetBounds(fullBounds);\n    return undefined;\n  }, [layerTarget]);\n  var content = /*#__PURE__*/React.createElement(StyledContainer, _extends({\n    ref: ref || containerRef,\n    id: id,\n    full: full,\n    margin: margin,\n    modal: modal,\n    targetBounds: !modal ? targetBounds : fullBounds\n  }, rest, {\n    position: position,\n    plain: plain,\n    responsive: responsive,\n    dir: theme.dir\n  }), /*#__PURE__*/React.createElement(HiddenAnchor, {\n    ref: anchorRef,\n    tabIndex: \"-1\",\n    \"aria-hidden\": \"true\"\n  }), children);\n\n  if (modal) {\n    content = /*#__PURE__*/React.createElement(StyledLayer, {\n      ref: layerRef,\n      id: id,\n      targetBounds: targetBounds,\n      plain: plain,\n      position: position,\n      responsive: responsive,\n      tabIndex: \"-1\",\n      dir: theme.dir\n    }, /*#__PURE__*/React.createElement(StyledOverlay, {\n      plain: plain,\n      onMouseDown: onClickOutside,\n      responsive: responsive\n    }), content);\n  }\n\n  if (onEsc) {\n    content = /*#__PURE__*/React.createElement(Keyboard, {\n      onEsc: onEsc\n    }, content);\n  }\n\n  if (theme.layer.background) {\n    var dark = backgroundIsDark(theme.layer.background, theme);\n\n    if (dark !== undefined && dark !== theme.dark) {\n      content = /*#__PURE__*/React.createElement(ThemeContext.Provider, {\n        value: _extends({}, theme, {\n          dark: dark\n        })\n      }, content);\n    }\n  }\n\n  if (modal) {\n    content = /*#__PURE__*/React.createElement(FocusedContainer, {\n      hidden: position === 'hidden',\n      restrictScroll: true\n    }, content);\n  }\n\n  return content;\n});\nexport { LayerContainer };","map":{"version":3,"sources":["/Users/erwanbeguin/Documents/Developper/ynov/dataviz/node_modules/grommet/es6/components/Layer/LayerContainer.js"],"names":["_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","_objectWithoutPropertiesLoose","excluded","sourceKeys","keys","indexOf","React","forwardRef","useContext","useEffect","useRef","useState","styled","ThemeContext","defaultProps","FocusedContainer","Keyboard","backgroundIsDark","findVisibleParent","StyledLayer","StyledContainer","StyledOverlay","HiddenAnchor","a","withConfig","displayName","componentId","fullBounds","left","right","top","bottom","LayerContainer","_ref","ref","children","_ref$full","full","id","_ref$margin","margin","_ref$modal","modal","onClickOutside","onEsc","plain","_ref$position","position","_ref$responsive","responsive","layerTarget","rest","theme","_useState","targetBounds","setTargetBounds","anchorRef","containerRef","layerRef","node","current","scrollIntoView","element","document","activeElement","parentElement","focus","updateBounds","rect","getBoundingClientRect","window","innerWidth","innerHeight","addEventListener","removeEventListener","undefined","content","createElement","dir","tabIndex","onMouseDown","layer","background","dark","Provider","value","hidden","restrictScroll"],"mappings":"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","sourcesContent":["function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React, { forwardRef, useContext, useEffect, useRef, useState } from 'react';\nimport styled, { ThemeContext } from 'styled-components';\nimport { defaultProps } from '../../default-props';\nimport { FocusedContainer } from '../FocusedContainer';\nimport { Keyboard } from '../Keyboard';\nimport { backgroundIsDark, findVisibleParent } from '../../utils';\nimport { StyledLayer, StyledContainer, StyledOverlay } from './StyledLayer';\nvar HiddenAnchor = styled.a.withConfig({\n  displayName: \"LayerContainer__HiddenAnchor\",\n  componentId: \"sc-1srj14c-0\"\n})([\"width:0;height:0;overflow:hidden;position:absolute;\"]);\nvar fullBounds = {\n  left: 0,\n  right: 0,\n  top: 0,\n  bottom: 0\n};\nvar LayerContainer = /*#__PURE__*/forwardRef(function (_ref, ref) {\n  var children = _ref.children,\n      _ref$full = _ref.full,\n      full = _ref$full === void 0 ? false : _ref$full,\n      id = _ref.id,\n      _ref$margin = _ref.margin,\n      margin = _ref$margin === void 0 ? 'none' : _ref$margin,\n      _ref$modal = _ref.modal,\n      modal = _ref$modal === void 0 ? true : _ref$modal,\n      onClickOutside = _ref.onClickOutside,\n      onEsc = _ref.onEsc,\n      plain = _ref.plain,\n      _ref$position = _ref.position,\n      position = _ref$position === void 0 ? 'center' : _ref$position,\n      _ref$responsive = _ref.responsive,\n      responsive = _ref$responsive === void 0 ? true : _ref$responsive,\n      layerTarget = _ref.target,\n      rest = _objectWithoutPropertiesLoose(_ref, [\"children\", \"full\", \"id\", \"margin\", \"modal\", \"onClickOutside\", \"onEsc\", \"plain\", \"position\", \"responsive\", \"target\"]);\n\n  var theme = useContext(ThemeContext) || defaultProps.theme;\n\n  var _useState = useState(fullBounds),\n      targetBounds = _useState[0],\n      setTargetBounds = _useState[1];\n\n  var anchorRef = useRef();\n  var containerRef = useRef();\n  var layerRef = useRef();\n  useEffect(function () {\n    if (position !== 'hidden') {\n      var node = layerRef.current || containerRef.current || ref.current;\n      if (node && node.scrollIntoView) node.scrollIntoView(); // Once layer is open we make sure it has focus so that you\n      // can start tabbing inside the layer. If the caller put focus\n      // on an element already, we honor that. Otherwise, we put\n      // the focus in the hidden anchor.\n\n      var element = document.activeElement;\n\n      while (element) {\n        if (element === containerRef.current) {\n          // already have focus inside the container\n          break;\n        }\n\n        element = element.parentElement;\n      }\n\n      if (modal && !element && anchorRef.current) {\n        anchorRef.current.focus();\n      }\n    }\n  }, [modal, position, ref]);\n  useEffect(function () {\n    if (position !== 'hidden') {\n      var node = layerRef.current || containerRef.current || ref.current;\n      if (node && node.scrollIntoView) node.scrollIntoView();\n    }\n  }, [position, ref]);\n  useEffect(function () {\n    if (layerTarget) {\n      var updateBounds = function updateBounds() {\n        var rect = findVisibleParent(layerTarget).getBoundingClientRect();\n        setTargetBounds({\n          left: rect.left,\n          right: window.innerWidth - rect.right,\n          top: rect.top,\n          bottom: window.innerHeight - rect.bottom\n        });\n      };\n\n      updateBounds();\n      window.addEventListener('resize', updateBounds);\n      return function () {\n        return window.removeEventListener('resize', updateBounds);\n      };\n    }\n\n    setTargetBounds(fullBounds);\n    return undefined;\n  }, [layerTarget]);\n  var content = /*#__PURE__*/React.createElement(StyledContainer, _extends({\n    ref: ref || containerRef,\n    id: id,\n    full: full,\n    margin: margin,\n    modal: modal,\n    targetBounds: !modal ? targetBounds : fullBounds\n  }, rest, {\n    position: position,\n    plain: plain,\n    responsive: responsive,\n    dir: theme.dir\n  }), /*#__PURE__*/React.createElement(HiddenAnchor, {\n    ref: anchorRef,\n    tabIndex: \"-1\",\n    \"aria-hidden\": \"true\"\n  }), children);\n\n  if (modal) {\n    content = /*#__PURE__*/React.createElement(StyledLayer, {\n      ref: layerRef,\n      id: id,\n      targetBounds: targetBounds,\n      plain: plain,\n      position: position,\n      responsive: responsive,\n      tabIndex: \"-1\",\n      dir: theme.dir\n    }, /*#__PURE__*/React.createElement(StyledOverlay, {\n      plain: plain,\n      onMouseDown: onClickOutside,\n      responsive: responsive\n    }), content);\n  }\n\n  if (onEsc) {\n    content = /*#__PURE__*/React.createElement(Keyboard, {\n      onEsc: onEsc\n    }, content);\n  }\n\n  if (theme.layer.background) {\n    var dark = backgroundIsDark(theme.layer.background, theme);\n\n    if (dark !== undefined && dark !== theme.dark) {\n      content = /*#__PURE__*/React.createElement(ThemeContext.Provider, {\n        value: _extends({}, theme, {\n          dark: dark\n        })\n      }, content);\n    }\n  }\n\n  if (modal) {\n    content = /*#__PURE__*/React.createElement(FocusedContainer, {\n      hidden: position === 'hidden',\n      restrictScroll: true\n    }, content);\n  }\n\n  return content;\n});\nexport { LayerContainer };"]},"metadata":{},"sourceType":"module"}