{"ast":null,"code":"function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nimport React, { useCallback, useMemo, useState } from 'react';\nimport { Header } from './Header';\nimport { Footer } from './Footer';\nimport { Body } from './Body';\nimport { GroupedBody } from './GroupedBody';\nimport { buildFooterValues, buildGroups, buildGroupState, filterAndSortData, initializeFilters, normalizePrimaryProperty } from './buildState';\nimport { StyledDataTable } from './StyledDataTable';\nvar contexts = ['header', 'body', 'footer'];\n\nvar normalizeProp = function normalizeProp(prop, context) {\n  if (prop) {\n    if (prop[context]) return prop[context];\n    if (contexts.some(function (c) {\n      return prop[c];\n    })) return undefined;\n    return prop;\n  }\n\n  return undefined;\n};\n\nvar DataTable = function DataTable(_ref) {\n  var background = _ref.background,\n      border = _ref.border,\n      _ref$columns = _ref.columns,\n      columns = _ref$columns === void 0 ? [] : _ref$columns,\n      _ref$data = _ref.data,\n      data = _ref$data === void 0 ? [] : _ref$data,\n      groupBy = _ref.groupBy,\n      onClickRow = _ref.onClickRow,\n      onMore = _ref.onMore,\n      onSearch = _ref.onSearch,\n      onSortProp = _ref.onSort,\n      replace = _ref.replace,\n      pad = _ref.pad,\n      primaryKey = _ref.primaryKey,\n      resizeable = _ref.resizeable,\n      rowProps = _ref.rowProps,\n      size = _ref.size,\n      sortProp = _ref.sort,\n      sortable = _ref.sortable,\n      _ref$step = _ref.step,\n      step = _ref$step === void 0 ? 50 : _ref$step,\n      rest = _objectWithoutPropertiesLoose(_ref, [\"background\", \"border\", \"columns\", \"data\", \"groupBy\", \"onClickRow\", \"onMore\", \"onSearch\", \"onSort\", \"replace\", \"pad\", \"primaryKey\", \"resizeable\", \"rowProps\", \"size\", \"sort\", \"sortable\", \"step\"]); // property name of the primary property\n\n\n  var primaryProperty = useMemo(function () {\n    return normalizePrimaryProperty(columns, primaryKey);\n  }, [columns, primaryKey]); // whether or not we should show a footer\n\n  var showFooter = useMemo(function () {\n    return columns.filter(function (c) {\n      return c.footer;\n    }).length > 0;\n  }, [columns]); // what column we are actively capturing filter input on\n\n  var _useState = useState(),\n      filtering = _useState[0],\n      setFiltering = _useState[1]; // the currently active filters\n\n\n  var _useState2 = useState(initializeFilters(columns)),\n      filters = _useState2[0],\n      setFilters = _useState2[1]; // which column we are sorting on, with direction\n\n\n  var _useState3 = useState(sortProp || {}),\n      sort = _useState3[0],\n      setSort = _useState3[1]; // the data filtered and sorted, if needed\n\n\n  var adjustedData = useMemo(function () {\n    return filterAndSortData(data, filters, onSearch, sort);\n  }, [data, filters, onSearch, sort]); // the values to put in the footer cells\n\n  var footerValues = useMemo(function () {\n    return buildFooterValues(columns, adjustedData);\n  }, [adjustedData, columns]); // if groupBy, an array with one item per unique groupBy key value\n\n  var groups = useMemo(function () {\n    return buildGroups(columns, adjustedData, groupBy);\n  }, [adjustedData, columns, groupBy]); // an object indicating which group values are expanded\n\n  var _useState4 = useState(buildGroupState(groups, groupBy)),\n      groupState = _useState4[0],\n      setGroupState = _useState4[1]; // any customized column widths\n\n\n  var _useState5 = useState({}),\n      widths = _useState5[0],\n      setWidths = _useState5[1]; // remember that we are filtering on this property\n\n\n  var onFiltering = function onFiltering(property) {\n    return setFiltering(property);\n  }; // remember the search text we should filter this property by\n\n\n  var onFilter = function onFilter(property, value) {\n    var nextFilters = _extends({}, filters);\n\n    nextFilters[property] = value;\n    setFilters(nextFilters); // Let caller know about search, if interested\n\n    if (onSearch) onSearch(nextFilters);\n  }; // toggle the sort direction on this property\n\n\n  var onSort = function onSort(property) {\n    return function () {\n      var direction;\n      if (!sort || property !== sort.property) direction = 'asc';else if (sort.direction === 'asc') direction = 'desc';else direction = 'asc';\n      var nextSort = {\n        property: property,\n        direction: direction\n      };\n      setSort(nextSort);\n      if (onSortProp) onSortProp(nextSort);\n    };\n  }; // toggle whether the group is expanded\n\n\n  var onToggleGroup = function onToggleGroup(groupValue) {\n    return function () {\n      var nextGroupState = _extends({}, groupState);\n\n      nextGroupState[groupValue] = _extends({}, nextGroupState[groupValue], {\n        expanded: !nextGroupState[groupValue].expanded\n      });\n      setGroupState(nextGroupState);\n\n      if (groupBy.onExpand) {\n        var expandedKeys = Object.keys(nextGroupState).filter(function (k) {\n          return nextGroupState[k].expanded;\n        });\n        groupBy.onExpand(expandedKeys);\n      }\n    };\n  }; // toggle whether all groups are expanded\n\n\n  var onToggleGroups = function onToggleGroups() {\n    var expanded = Object.keys(groupState).filter(function (k) {\n      return !groupState[k].expanded;\n    }).length === 0;\n    var nextGroupState = {};\n    Object.keys(groupState).forEach(function (k) {\n      nextGroupState[k] = _extends({}, groupState[k], {\n        expanded: !expanded\n      });\n    });\n    setGroupState(nextGroupState);\n\n    if (groupBy.onExpand) {\n      var expandedKeys = Object.keys(nextGroupState).filter(function (k) {\n        return nextGroupState[k].expanded;\n      });\n      groupBy.onExpand(expandedKeys);\n    }\n  }; // remember the width this property's column should be\n\n\n  var onResize = useCallback(function (property, width) {\n    if (widths[property] !== width) {\n      var nextWidths = _extends({}, widths);\n\n      nextWidths[property] = width;\n      setWidths(nextWidths);\n    }\n  }, [widths]);\n\n  if (size && resizeable) {\n    console.warn('DataTable cannot combine \"size\" and \"resizeble\".');\n  }\n\n  return /*#__PURE__*/React.createElement(StyledDataTable, rest, /*#__PURE__*/React.createElement(Header, {\n    background: normalizeProp(background, 'header'),\n    border: normalizeProp(border, 'header'),\n    columns: columns,\n    filtering: filtering,\n    filters: filters,\n    groups: groups,\n    groupState: groupState,\n    pad: normalizeProp(pad, 'header'),\n    size: size,\n    sort: sort,\n    widths: widths,\n    onFiltering: onFiltering,\n    onFilter: onFilter,\n    onResize: resizeable ? onResize : undefined,\n    onSort: sortable || sortProp || onSortProp ? onSort : undefined,\n    onToggle: onToggleGroups\n  }), groups ? /*#__PURE__*/React.createElement(GroupedBody, {\n    background: normalizeProp(background, 'body'),\n    border: normalizeProp(border, 'body'),\n    columns: columns,\n    groupBy: groupBy.property ? groupBy.property : groupBy,\n    groups: groups,\n    groupState: groupState,\n    pad: normalizeProp(pad, 'body'),\n    primaryProperty: primaryProperty,\n    onToggle: onToggleGroup,\n    size: size\n  }) : /*#__PURE__*/React.createElement(Body, {\n    background: normalizeProp(background, 'body'),\n    border: normalizeProp(border, 'body'),\n    columns: columns,\n    data: adjustedData,\n    onMore: onMore,\n    replace: replace,\n    onClickRow: onClickRow,\n    pad: normalizeProp(pad, 'body'),\n    primaryProperty: primaryProperty,\n    rowProps: rowProps,\n    size: size,\n    step: step\n  }), showFooter && /*#__PURE__*/React.createElement(Footer, {\n    background: normalizeProp(background, 'footer'),\n    border: normalizeProp(border, 'footer'),\n    columns: columns,\n    footerValues: footerValues,\n    groups: groups,\n    pad: normalizeProp(pad, 'footer'),\n    primaryProperty: primaryProperty,\n    size: size\n  }));\n};\n\nvar DataTableDoc;\n\nif (process.env.NODE_ENV !== 'production') {\n  // eslint-disable-next-line global-require\n  DataTableDoc = require('./doc').doc(DataTable);\n}\n\nvar DataTableWrapper = DataTableDoc || DataTable;\nexport { DataTableWrapper as DataTable };","map":{"version":3,"sources":["/Users/erwanbeguin/Documents/Developper/ynov/dataviz/node_modules/grommet/es6/components/DataTable/DataTable.js"],"names":["_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","_objectWithoutPropertiesLoose","excluded","sourceKeys","keys","indexOf","React","useCallback","useMemo","useState","Header","Footer","Body","GroupedBody","buildFooterValues","buildGroups","buildGroupState","filterAndSortData","initializeFilters","normalizePrimaryProperty","StyledDataTable","contexts","normalizeProp","prop","context","some","c","undefined","DataTable","_ref","background","border","_ref$columns","columns","_ref$data","data","groupBy","onClickRow","onMore","onSearch","onSortProp","onSort","replace","pad","primaryKey","resizeable","rowProps","size","sortProp","sort","sortable","_ref$step","step","rest","primaryProperty","showFooter","filter","footer","_useState","filtering","setFiltering","_useState2","filters","setFilters","_useState3","setSort","adjustedData","footerValues","groups","_useState4","groupState","setGroupState","_useState5","widths","setWidths","onFiltering","property","onFilter","value","nextFilters","direction","nextSort","onToggleGroup","groupValue","nextGroupState","expanded","onExpand","expandedKeys","k","onToggleGroups","forEach","onResize","width","nextWidths","console","warn","createElement","onToggle","DataTableDoc","process","env","NODE_ENV","require","doc","DataTableWrapper"],"mappings":"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","sourcesContent":["function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React, { useCallback, useMemo, useState } from 'react';\nimport { Header } from './Header';\nimport { Footer } from './Footer';\nimport { Body } from './Body';\nimport { GroupedBody } from './GroupedBody';\nimport { buildFooterValues, buildGroups, buildGroupState, filterAndSortData, initializeFilters, normalizePrimaryProperty } from './buildState';\nimport { StyledDataTable } from './StyledDataTable';\nvar contexts = ['header', 'body', 'footer'];\n\nvar normalizeProp = function normalizeProp(prop, context) {\n  if (prop) {\n    if (prop[context]) return prop[context];\n    if (contexts.some(function (c) {\n      return prop[c];\n    })) return undefined;\n    return prop;\n  }\n\n  return undefined;\n};\n\nvar DataTable = function DataTable(_ref) {\n  var background = _ref.background,\n      border = _ref.border,\n      _ref$columns = _ref.columns,\n      columns = _ref$columns === void 0 ? [] : _ref$columns,\n      _ref$data = _ref.data,\n      data = _ref$data === void 0 ? [] : _ref$data,\n      groupBy = _ref.groupBy,\n      onClickRow = _ref.onClickRow,\n      onMore = _ref.onMore,\n      onSearch = _ref.onSearch,\n      onSortProp = _ref.onSort,\n      replace = _ref.replace,\n      pad = _ref.pad,\n      primaryKey = _ref.primaryKey,\n      resizeable = _ref.resizeable,\n      rowProps = _ref.rowProps,\n      size = _ref.size,\n      sortProp = _ref.sort,\n      sortable = _ref.sortable,\n      _ref$step = _ref.step,\n      step = _ref$step === void 0 ? 50 : _ref$step,\n      rest = _objectWithoutPropertiesLoose(_ref, [\"background\", \"border\", \"columns\", \"data\", \"groupBy\", \"onClickRow\", \"onMore\", \"onSearch\", \"onSort\", \"replace\", \"pad\", \"primaryKey\", \"resizeable\", \"rowProps\", \"size\", \"sort\", \"sortable\", \"step\"]);\n\n  // property name of the primary property\n  var primaryProperty = useMemo(function () {\n    return normalizePrimaryProperty(columns, primaryKey);\n  }, [columns, primaryKey]); // whether or not we should show a footer\n\n  var showFooter = useMemo(function () {\n    return columns.filter(function (c) {\n      return c.footer;\n    }).length > 0;\n  }, [columns]); // what column we are actively capturing filter input on\n\n  var _useState = useState(),\n      filtering = _useState[0],\n      setFiltering = _useState[1]; // the currently active filters\n\n\n  var _useState2 = useState(initializeFilters(columns)),\n      filters = _useState2[0],\n      setFilters = _useState2[1]; // which column we are sorting on, with direction\n\n\n  var _useState3 = useState(sortProp || {}),\n      sort = _useState3[0],\n      setSort = _useState3[1]; // the data filtered and sorted, if needed\n\n\n  var adjustedData = useMemo(function () {\n    return filterAndSortData(data, filters, onSearch, sort);\n  }, [data, filters, onSearch, sort]); // the values to put in the footer cells\n\n  var footerValues = useMemo(function () {\n    return buildFooterValues(columns, adjustedData);\n  }, [adjustedData, columns]); // if groupBy, an array with one item per unique groupBy key value\n\n  var groups = useMemo(function () {\n    return buildGroups(columns, adjustedData, groupBy);\n  }, [adjustedData, columns, groupBy]); // an object indicating which group values are expanded\n\n  var _useState4 = useState(buildGroupState(groups, groupBy)),\n      groupState = _useState4[0],\n      setGroupState = _useState4[1]; // any customized column widths\n\n\n  var _useState5 = useState({}),\n      widths = _useState5[0],\n      setWidths = _useState5[1]; // remember that we are filtering on this property\n\n\n  var onFiltering = function onFiltering(property) {\n    return setFiltering(property);\n  }; // remember the search text we should filter this property by\n\n\n  var onFilter = function onFilter(property, value) {\n    var nextFilters = _extends({}, filters);\n\n    nextFilters[property] = value;\n    setFilters(nextFilters); // Let caller know about search, if interested\n\n    if (onSearch) onSearch(nextFilters);\n  }; // toggle the sort direction on this property\n\n\n  var onSort = function onSort(property) {\n    return function () {\n      var direction;\n      if (!sort || property !== sort.property) direction = 'asc';else if (sort.direction === 'asc') direction = 'desc';else direction = 'asc';\n      var nextSort = {\n        property: property,\n        direction: direction\n      };\n      setSort(nextSort);\n      if (onSortProp) onSortProp(nextSort);\n    };\n  }; // toggle whether the group is expanded\n\n\n  var onToggleGroup = function onToggleGroup(groupValue) {\n    return function () {\n      var nextGroupState = _extends({}, groupState);\n\n      nextGroupState[groupValue] = _extends({}, nextGroupState[groupValue], {\n        expanded: !nextGroupState[groupValue].expanded\n      });\n      setGroupState(nextGroupState);\n\n      if (groupBy.onExpand) {\n        var expandedKeys = Object.keys(nextGroupState).filter(function (k) {\n          return nextGroupState[k].expanded;\n        });\n        groupBy.onExpand(expandedKeys);\n      }\n    };\n  }; // toggle whether all groups are expanded\n\n\n  var onToggleGroups = function onToggleGroups() {\n    var expanded = Object.keys(groupState).filter(function (k) {\n      return !groupState[k].expanded;\n    }).length === 0;\n    var nextGroupState = {};\n    Object.keys(groupState).forEach(function (k) {\n      nextGroupState[k] = _extends({}, groupState[k], {\n        expanded: !expanded\n      });\n    });\n    setGroupState(nextGroupState);\n\n    if (groupBy.onExpand) {\n      var expandedKeys = Object.keys(nextGroupState).filter(function (k) {\n        return nextGroupState[k].expanded;\n      });\n      groupBy.onExpand(expandedKeys);\n    }\n  }; // remember the width this property's column should be\n\n\n  var onResize = useCallback(function (property, width) {\n    if (widths[property] !== width) {\n      var nextWidths = _extends({}, widths);\n\n      nextWidths[property] = width;\n      setWidths(nextWidths);\n    }\n  }, [widths]);\n\n  if (size && resizeable) {\n    console.warn('DataTable cannot combine \"size\" and \"resizeble\".');\n  }\n\n  return /*#__PURE__*/React.createElement(StyledDataTable, rest, /*#__PURE__*/React.createElement(Header, {\n    background: normalizeProp(background, 'header'),\n    border: normalizeProp(border, 'header'),\n    columns: columns,\n    filtering: filtering,\n    filters: filters,\n    groups: groups,\n    groupState: groupState,\n    pad: normalizeProp(pad, 'header'),\n    size: size,\n    sort: sort,\n    widths: widths,\n    onFiltering: onFiltering,\n    onFilter: onFilter,\n    onResize: resizeable ? onResize : undefined,\n    onSort: sortable || sortProp || onSortProp ? onSort : undefined,\n    onToggle: onToggleGroups\n  }), groups ? /*#__PURE__*/React.createElement(GroupedBody, {\n    background: normalizeProp(background, 'body'),\n    border: normalizeProp(border, 'body'),\n    columns: columns,\n    groupBy: groupBy.property ? groupBy.property : groupBy,\n    groups: groups,\n    groupState: groupState,\n    pad: normalizeProp(pad, 'body'),\n    primaryProperty: primaryProperty,\n    onToggle: onToggleGroup,\n    size: size\n  }) : /*#__PURE__*/React.createElement(Body, {\n    background: normalizeProp(background, 'body'),\n    border: normalizeProp(border, 'body'),\n    columns: columns,\n    data: adjustedData,\n    onMore: onMore,\n    replace: replace,\n    onClickRow: onClickRow,\n    pad: normalizeProp(pad, 'body'),\n    primaryProperty: primaryProperty,\n    rowProps: rowProps,\n    size: size,\n    step: step\n  }), showFooter && /*#__PURE__*/React.createElement(Footer, {\n    background: normalizeProp(background, 'footer'),\n    border: normalizeProp(border, 'footer'),\n    columns: columns,\n    footerValues: footerValues,\n    groups: groups,\n    pad: normalizeProp(pad, 'footer'),\n    primaryProperty: primaryProperty,\n    size: size\n  }));\n};\n\nvar DataTableDoc;\n\nif (process.env.NODE_ENV !== 'production') {\n  // eslint-disable-next-line global-require\n  DataTableDoc = require('./doc').doc(DataTable);\n}\n\nvar DataTableWrapper = DataTableDoc || DataTable;\nexport { DataTableWrapper as DataTable };"]},"metadata":{},"sourceType":"module"}