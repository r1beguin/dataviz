{"ast":null,"code":"import React, { useMemo, useRef, useState } from 'react';\nimport styled from 'styled-components';\nimport { Box } from '../Box';\nimport { Drop } from '../Drop';\nimport { Grid } from '../Grid';\nimport { Keyboard } from '../Keyboard';\nimport { Text } from '../Text';\nimport { focusStyle } from '../../utils';\nimport { Swatch } from './Swatch';\nvar DetailControl = styled(Box).withConfig({\n  displayName: \"Detail__DetailControl\",\n  componentId: \"huiwg9-0\"\n})([\"&:focus{\", \"}\"], focusStyle());\n\nvar Detail = function Detail(_ref) {\n  var activeProperty = _ref.activeProperty,\n      axis = _ref.axis,\n      data = _ref.data,\n      series = _ref.series,\n      seriesStyles = _ref.seriesStyles,\n      renderValue = _ref.renderValue;\n\n  var _useState = useState(),\n      detailIndex = _useState[0],\n      setDetailIndex = _useState[1];\n\n  var detailContainer = useRef();\n  var detailRefs = useMemo(function () {\n    return [];\n  }, []);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Keyboard, {\n    onLeft: function onLeft() {\n      if (detailIndex === undefined) setDetailIndex(data.length - 1);else if (detailIndex > 0) setDetailIndex(detailIndex - 1);\n    },\n    onRight: function onRight() {\n      if (detailIndex === undefined) setDetailIndex(0);else if (detailIndex < data.length - 1) setDetailIndex(detailIndex + 1);\n    }\n  }, /*#__PURE__*/React.createElement(DetailControl, {\n    key: \"band\",\n    ref: detailContainer,\n    tabIndex: 0,\n    direction: \"row\",\n    fill: true,\n    justify: \"between\",\n    gap: data.length / 2 + 1 + \"px\",\n    responsive: false,\n    onMouseOut: function onMouseOut(event) {\n      var rect = detailContainer.current.getBoundingClientRect();\n      if (event.pageX < rect.left || event.pageX > rect.right || event.pageY < rect.top || event.pageY > rect.bottom) setDetailIndex(undefined);\n    },\n    onFocus: function onFocus() {},\n    onBlur: function onBlur() {\n      return setDetailIndex(undefined);\n    }\n  }, data.map(function (_, i) {\n    return /*#__PURE__*/React.createElement(Box // eslint-disable-next-line react/no-array-index-key\n    , {\n      key: i,\n      flex: true,\n      align: \"center\",\n      onMouseOver: function onMouseOver() {\n        return setDetailIndex(i);\n      },\n      onFocus: function onFocus() {},\n      onBlur: function onBlur() {}\n    }, /*#__PURE__*/React.createElement(Box, {\n      ref: function ref(c) {\n        detailRefs[i] = c;\n      },\n      fill: \"vertical\",\n      border: detailIndex === i ? true : undefined\n    }));\n  }))), detailIndex !== undefined && detailRefs[detailIndex] && /*#__PURE__*/React.createElement(Drop, {\n    key: \"drop\",\n    target: detailRefs[detailIndex],\n    align: detailIndex > data.length / 2 ? {\n      right: 'left'\n    } : {\n      left: 'right'\n    },\n    plain: true\n  }, /*#__PURE__*/React.createElement(Box, {\n    pad: \"small\",\n    background: {\n      color: 'background-back'\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    columns: ['auto', 'auto', 'auto'],\n    gap: \"xsmall\",\n    align: \"center\"\n  }, series.filter(function (_ref2) {\n    var property = _ref2.property;\n    return !activeProperty || activeProperty === property || axis && axis.x && axis.x.property === property;\n  }).map(function (serie) {\n    var propertyStyle = seriesStyles[serie.property];\n    return /*#__PURE__*/React.createElement(React.Fragment, null, propertyStyle ? /*#__PURE__*/React.createElement(Swatch, propertyStyle) : /*#__PURE__*/React.createElement(\"span\", null), /*#__PURE__*/React.createElement(Text, {\n      size: \"small\"\n    }, serie.label || serie.property), /*#__PURE__*/React.createElement(Text, {\n      size: \"small\",\n      weight: \"bold\"\n    }, renderValue(serie, detailIndex)));\n  })))));\n};\n\nexport { Detail };","map":{"version":3,"sources":["/Users/erwanbeguin/Documents/Developper/ynov/dataviz/node_modules/grommet/es6/components/DataChart/Detail.js"],"names":["React","useMemo","useRef","useState","styled","Box","Drop","Grid","Keyboard","Text","focusStyle","Swatch","DetailControl","withConfig","displayName","componentId","Detail","_ref","activeProperty","axis","data","series","seriesStyles","renderValue","_useState","detailIndex","setDetailIndex","detailContainer","detailRefs","createElement","Fragment","onLeft","undefined","length","onRight","key","ref","tabIndex","direction","fill","justify","gap","responsive","onMouseOut","event","rect","current","getBoundingClientRect","pageX","left","right","pageY","top","bottom","onFocus","onBlur","map","_","i","flex","align","onMouseOver","c","border","target","plain","pad","background","color","columns","filter","_ref2","property","x","serie","propertyStyle","size","label","weight"],"mappings":"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","sourcesContent":["import React, { useMemo, useRef, useState } from 'react';\nimport styled from 'styled-components';\nimport { Box } from '../Box';\nimport { Drop } from '../Drop';\nimport { Grid } from '../Grid';\nimport { Keyboard } from '../Keyboard';\nimport { Text } from '../Text';\nimport { focusStyle } from '../../utils';\nimport { Swatch } from './Swatch';\nvar DetailControl = styled(Box).withConfig({\n  displayName: \"Detail__DetailControl\",\n  componentId: \"huiwg9-0\"\n})([\"&:focus{\", \"}\"], focusStyle());\n\nvar Detail = function Detail(_ref) {\n  var activeProperty = _ref.activeProperty,\n      axis = _ref.axis,\n      data = _ref.data,\n      series = _ref.series,\n      seriesStyles = _ref.seriesStyles,\n      renderValue = _ref.renderValue;\n\n  var _useState = useState(),\n      detailIndex = _useState[0],\n      setDetailIndex = _useState[1];\n\n  var detailContainer = useRef();\n  var detailRefs = useMemo(function () {\n    return [];\n  }, []);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Keyboard, {\n    onLeft: function onLeft() {\n      if (detailIndex === undefined) setDetailIndex(data.length - 1);else if (detailIndex > 0) setDetailIndex(detailIndex - 1);\n    },\n    onRight: function onRight() {\n      if (detailIndex === undefined) setDetailIndex(0);else if (detailIndex < data.length - 1) setDetailIndex(detailIndex + 1);\n    }\n  }, /*#__PURE__*/React.createElement(DetailControl, {\n    key: \"band\",\n    ref: detailContainer,\n    tabIndex: 0,\n    direction: \"row\",\n    fill: true,\n    justify: \"between\",\n    gap: data.length / 2 + 1 + \"px\",\n    responsive: false,\n    onMouseOut: function onMouseOut(event) {\n      var rect = detailContainer.current.getBoundingClientRect();\n      if (event.pageX < rect.left || event.pageX > rect.right || event.pageY < rect.top || event.pageY > rect.bottom) setDetailIndex(undefined);\n    },\n    onFocus: function onFocus() {},\n    onBlur: function onBlur() {\n      return setDetailIndex(undefined);\n    }\n  }, data.map(function (_, i) {\n    return /*#__PURE__*/React.createElement(Box // eslint-disable-next-line react/no-array-index-key\n    , {\n      key: i,\n      flex: true,\n      align: \"center\",\n      onMouseOver: function onMouseOver() {\n        return setDetailIndex(i);\n      },\n      onFocus: function onFocus() {},\n      onBlur: function onBlur() {}\n    }, /*#__PURE__*/React.createElement(Box, {\n      ref: function ref(c) {\n        detailRefs[i] = c;\n      },\n      fill: \"vertical\",\n      border: detailIndex === i ? true : undefined\n    }));\n  }))), detailIndex !== undefined && detailRefs[detailIndex] && /*#__PURE__*/React.createElement(Drop, {\n    key: \"drop\",\n    target: detailRefs[detailIndex],\n    align: detailIndex > data.length / 2 ? {\n      right: 'left'\n    } : {\n      left: 'right'\n    },\n    plain: true\n  }, /*#__PURE__*/React.createElement(Box, {\n    pad: \"small\",\n    background: {\n      color: 'background-back'\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    columns: ['auto', 'auto', 'auto'],\n    gap: \"xsmall\",\n    align: \"center\"\n  }, series.filter(function (_ref2) {\n    var property = _ref2.property;\n    return !activeProperty || activeProperty === property || axis && axis.x && axis.x.property === property;\n  }).map(function (serie) {\n    var propertyStyle = seriesStyles[serie.property];\n    return /*#__PURE__*/React.createElement(React.Fragment, null, propertyStyle ? /*#__PURE__*/React.createElement(Swatch, propertyStyle) : /*#__PURE__*/React.createElement(\"span\", null), /*#__PURE__*/React.createElement(Text, {\n      size: \"small\"\n    }, serie.label || serie.property), /*#__PURE__*/React.createElement(Text, {\n      size: \"small\",\n      weight: \"bold\"\n    }, renderValue(serie, detailIndex)));\n  })))));\n};\n\nexport { Detail };"]},"metadata":{},"sourceType":"module"}