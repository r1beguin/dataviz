{"ast":null,"code":"var __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nimport * as React from \"react\";\nimport Providers from \"./Providers\";\nimport PropTypes from \"prop-types\";\nimport { LatLng } from \"leaflet\";\nimport \"../css/index.css\";\nimport { SearchInput } from \"./core/search-input\";\nimport { SearchCloseButton } from \"./core/search-close-button\";\nimport { SearchIconButton } from \"./core/search-icon-button\";\nimport { SearchInfoList } from \"./core/search-info-list\";\n\nclass SearchControl extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.setLock = value => {\n      this.lock = value;\n    };\n\n    this.openSearch = () => {\n      this.setState({\n        open: true\n      }, () => {\n        var _a;\n\n        (_a = this.input.current) === null || _a === void 0 ? void 0 : _a.focus();\n      });\n    };\n\n    this.closeSearch = () => {\n      this.setState({\n        open: this.props.openSearchOnLoad,\n        closeButton: false,\n        showInfo: false\n      }, () => {\n        this.inputValueSetter(\"\");\n        this.SearchResponseInfo = \"\";\n        this.props.handler && this.props.handler({\n          event: \"remove\"\n        });\n      });\n    };\n\n    this.searchIconButtonOnClick = e => {\n      e.preventDefault();\n      e.stopPropagation();\n      this.state.open ? this.closeSearch() : this.openSearch();\n    };\n\n    this.inputBlur = e => {\n      var _a;\n\n      ((_a = this.input.current) === null || _a === void 0 ? void 0 : _a.value) === \"\" && !this.lock && this.closeSearch();\n    };\n\n    this.inputClick = e => {\n      var _a, _b, _c;\n\n      (_a = this.input.current) === null || _a === void 0 ? void 0 : _a.focus();\n\n      if (!((_b = this.input.current) === null || _b === void 0 ? void 0 : _b.value.startsWith(\":\")) && this.lastInfo !== null && this.lastInfo !== \"\" && ((_c = this.input.current) === null || _c === void 0 ? void 0 : _c.value) !== \"\") {\n        this.SearchResponseInfo = this.lastInfo;\n        this.lastInfo = null;\n        this.setState({\n          showInfo: true\n        });\n      }\n    };\n\n    this.inputKeyUp = e => {\n      e.keyCode === 13 && this.beautifyValue(this.input.current.value);\n    };\n\n    this.closeClick = e => {\n      this.closeSearch();\n    };\n\n    this.sendToAction = e => __awaiter(this, void 0, void 0, function* () {\n      if (!this.input.current.value.startsWith(\":\")) {\n        if (Object.prototype.hasOwnProperty.call(this.responseCache, this.input.current.value)) {\n          this.showInfo(this.responseCache[this.input.current.value].info);\n        } else {\n          if (this.input.current.value.length >= 3) {\n            this.showInfo(\"Searching...\");\n            const searchValue = this.input.current.value;\n            const response = yield this.provider.search(searchValue);\n\n            if (response.error) {\n              return false;\n            }\n\n            this.responseCache[searchValue] = response;\n            this.showInfo(response.info);\n          }\n        }\n      }\n    });\n\n    this.syncInput = () => {\n      var _a, _b;\n\n      !this.state.closeButton && this.setState({\n        closeButton: true\n      });\n\n      if (((_a = this.input.current) === null || _a === void 0 ? void 0 : _a.value) === \"\") {\n        this.hideInfo();\n        this.state.closeButton && this.setState({\n          closeButton: false\n        });\n      }\n\n      if (!((_b = this.input.current) === null || _b === void 0 ? void 0 : _b.value.startsWith(\":\"))) {}\n    };\n\n    this.listItemClick = (itemData, totalInfo, activeIndex) => {\n      this.showInfo(totalInfo, activeIndex);\n      this.props.handler && this.props.handler({\n        event: \"add\",\n        payload: {\n          latLng: new LatLng(Number(itemData.latitude), Number(itemData.longitude)),\n          info: itemData.name,\n          raw: this.responseCache[this.input.current.value].raw\n        }\n      });\n\n      if (this.props.closeResultsOnClick) {\n        this.hideInfo();\n      }\n    };\n\n    this.setMaxHeight = () => {\n      const containerRect = this.props.map ? this.props.map.getContainer().getBoundingClientRect() : document.body.getBoundingClientRect();\n      const divRect = this.input.current.getBoundingClientRect();\n      const maxHeight = `${Math.floor((containerRect.bottom - divRect.bottom - 10) * 0.6)}px`;\n      this.selectbox.current && this.selectbox.current.style && (this.selectbox.current.style.maxHeight = maxHeight);\n    };\n\n    this.state = {\n      open: this.props.openSearchOnLoad,\n      closeButton: false,\n      showInfo: false\n    };\n    this.SearchResponseInfo = \"\";\n    this.responseCache = {};\n    this.lastInfo = null;\n\n    this.inputValueSetter = () => {};\n\n    this.selectbox = React.createRef();\n    this.div = React.createRef();\n    this.input = React.createRef(); // use custom provider if exists any\n\n    if (this.props.customProvider) {\n      this.provider = this.props.customProvider;\n    } else if (this.props.provider && Object.keys(Providers).includes(this.props.provider)) {\n      const Provider = Providers[this.props.provider];\n      this.provider = new Provider(this.props.providerOptions);\n    } else {\n      throw new Error(`You set the provider prop to ${this.props.provider} but that isn't recognised. You can choose from ${Object.keys(Providers).join(\", \")}`);\n    }\n  }\n\n  beautifyValue(value) {\n    if (value.startsWith(\":\")) {\n      const latLng = value.slice(1).split(\",\").filter(e => !isNaN(Number(e))).map(e => Number(e ? e : 0));\n\n      if (latLng.length <= 1) {\n        this.showInfo(\"Please enter a valid lat, lng\");\n      } else {\n        this.hideInfo();\n        this.props.handler && this.props.handler({\n          event: \"add\",\n          payload: {\n            latLng: new LatLng(Number(latLng[0]), Number(latLng[1])),\n            info: latLng.join(\",\"),\n            raw: latLng.join(\",\")\n          }\n        });\n      }\n    } else {\n      if (this.input.current.value.length < 3) {\n        const response = 'Please enter a valid lat,lng starting with \":\" or minimum 3 character to search';\n        this.showInfo(response);\n      }\n    }\n  }\n\n  hideInfo() {\n    this.lastInfo = this.SearchResponseInfo;\n    this.SearchResponseInfo = \"\";\n    this.setState({\n      showInfo: false\n    });\n  }\n\n  showInfo(info, activeIndex) {\n    var _a; // key changes when info changes so candidate number starts from zero\n\n\n    this.SearchResponseInfo = React.createElement(SearchInfoList, {\n      ref: this.selectbox,\n      activeIndex: activeIndex,\n      list: info,\n      handler: this.listItemClick,\n      tabIndex: this.props.tabIndex !== undefined ? this.props.tabIndex + 1 : 2\n    });\n    ((_a = this.input.current) === null || _a === void 0 ? void 0 : _a.value) && this.setState({\n      showInfo: true\n    });\n  }\n\n  componentDidMount() {\n    this.setMaxHeight();\n\n    if (this.props.search && !isNaN(Number(this.props.search.lat)) && !isNaN(Number(this.props.search.lng))) {\n      const inputValue = `:${this.props.search.lat},${this.props.search.lng}`;\n      this.inputValueSetter(inputValue);\n      this.openSearch();\n      this.syncInput(); // to show close button\n\n      this.props.handler && this.props.handler({\n        event: \"add\",\n        payload: {\n          latLng: new LatLng(Number(this.props.search.lat), Number(this.props.search.lng)),\n          info: inputValue,\n          raw: this.props.search\n        }\n      });\n    }\n  }\n\n  componentDidUpdate() {\n    this.setMaxHeight();\n\n    if (this.state.showInfo) {// this.selectbox.current && this.selectbox.current.focus();\n    }\n  }\n\n  render() {\n    return React.createElement(\"article\", {\n      className: `${this.props.className ? `${this.props.className} ` : \"\"}search-control-wrap`\n    }, React.createElement(\"section\", {\n      className: `search-control${this.state.open ? \" search-control-active\" : \"\"}`\n    }, React.createElement(SearchIconButton, {\n      className: \"search-control-icon-button\",\n      onClick: this.searchIconButtonOnClick,\n      onMouseEnter: () => this.setLock(true),\n      onMouseLeave: () => this.setLock(false)\n    }), React.createElement(SearchInput, {\n      tabIndex: this.props.tabIndex !== undefined ? this.props.tabIndex : 1,\n      ref: this.input,\n      getInputValueSetter: fn => this.inputValueSetter = fn,\n      className: \"search-control-input\",\n      placeholder: this.props.inputPlaceholder,\n      onClick: this.inputClick,\n      onMouseEnter: () => this.setLock(true),\n      onMouseLeave: () => this.setLock(false),\n      onChange: this.syncInput,\n      onChangeAsync: this.sendToAction,\n      onBlur: this.inputBlur,\n      onKeyUp: this.inputKeyUp,\n      onKeyPress: e => {\n        e.stopPropagation();\n        e.keyCode === 40 && e.preventDefault();\n      },\n      onKeyDown: e => {\n        var _a; // ArrowDown 40\n\n\n        if (e.keyCode === 40) {\n          e.preventDefault();\n          e.stopPropagation();\n          (_a = this.selectbox.current) === null || _a === void 0 ? void 0 : _a.focus();\n        } // ArrowUp 38\n\n      },\n      onSubmit: e => e.preventDefault()\n    }), React.createElement(SearchCloseButton, {\n      className: this.state.closeButton ? \" search-control-close-button-active\" : \"\",\n      onClick: this.closeClick\n    })), React.createElement(\"section\", {\n      className: `search-control-info-wrapper${this.state.showInfo ? \"\" : \" search-control-info-wrapper-close\"}`\n    }, React.createElement(\"section\", {\n      ref: this.div,\n      className: `search-control-info`\n    }, this.state.showInfo && this.SearchResponseInfo)));\n  }\n\n}\n\nSearchControl.propTypes = {\n  provider: PropTypes.string,\n  providerKey: PropTypes.string,\n  inputPlaceholder: PropTypes.string,\n  coords: PropTypes.arrayOf(PropTypes.number),\n  closeResultsOnClick: PropTypes.bool,\n  openSearchOnLoad: PropTypes.bool,\n  searchBounds: PropTypes.array,\n  providerOptions: PropTypes.object\n};\nSearchControl.defaultProps = {\n  inputPlaceholder: \"Search Lat,Lng\",\n  closeResultsOnClick: false,\n  openSearchOnLoad: false,\n  search: undefined,\n  provider: \"OpenStreetMap\"\n};\nexport { SearchControl };","map":{"version":3,"sources":["/Users/erwanbeguin/Documents/Developper/ynov/dataviz/node_modules/react-leaflet-search/lib/search-control.js"],"names":["__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","Promise","reject","fulfilled","step","next","e","rejected","result","done","then","apply","React","Providers","PropTypes","LatLng","SearchInput","SearchCloseButton","SearchIconButton","SearchInfoList","SearchControl","Component","constructor","props","setLock","lock","openSearch","setState","open","_a","input","current","focus","closeSearch","openSearchOnLoad","closeButton","showInfo","inputValueSetter","SearchResponseInfo","handler","event","searchIconButtonOnClick","preventDefault","stopPropagation","state","inputBlur","inputClick","_b","_c","startsWith","lastInfo","inputKeyUp","keyCode","beautifyValue","closeClick","sendToAction","Object","prototype","hasOwnProperty","call","responseCache","info","length","searchValue","response","provider","search","error","syncInput","hideInfo","listItemClick","itemData","totalInfo","activeIndex","payload","latLng","Number","latitude","longitude","name","raw","closeResultsOnClick","setMaxHeight","containerRect","map","getContainer","getBoundingClientRect","document","body","divRect","maxHeight","Math","floor","bottom","selectbox","style","createRef","div","customProvider","keys","includes","Provider","providerOptions","Error","join","slice","split","filter","isNaN","createElement","ref","list","tabIndex","undefined","componentDidMount","lat","lng","inputValue","componentDidUpdate","render","className","onClick","onMouseEnter","onMouseLeave","getInputValueSetter","fn","placeholder","inputPlaceholder","onChange","onChangeAsync","onBlur","onKeyUp","onKeyPress","onKeyDown","onSubmit","propTypes","string","providerKey","coords","arrayOf","number","bool","searchBounds","array","object","defaultProps"],"mappings":"AAAA,IAAIA,SAAS,GAAI,QAAQ,KAAKA,SAAd,IAA4B,UAAUC,OAAV,EAAmBC,UAAnB,EAA+BC,CAA/B,EAAkCC,SAAlC,EAA6C;AACrF,WAASC,KAAT,CAAeC,KAAf,EAAsB;AAAE,WAAOA,KAAK,YAAYH,CAAjB,GAAqBG,KAArB,GAA6B,IAAIH,CAAJ,CAAM,UAAUI,OAAV,EAAmB;AAAEA,MAAAA,OAAO,CAACD,KAAD,CAAP;AAAiB,KAA5C,CAApC;AAAoF;;AAC5G,SAAO,KAAKH,CAAC,KAAKA,CAAC,GAAGK,OAAT,CAAN,EAAyB,UAAUD,OAAV,EAAmBE,MAAnB,EAA2B;AACvD,aAASC,SAAT,CAAmBJ,KAAnB,EAA0B;AAAE,UAAI;AAAEK,QAAAA,IAAI,CAACP,SAAS,CAACQ,IAAV,CAAeN,KAAf,CAAD,CAAJ;AAA8B,OAApC,CAAqC,OAAOO,CAAP,EAAU;AAAEJ,QAAAA,MAAM,CAACI,CAAD,CAAN;AAAY;AAAE;;AAC3F,aAASC,QAAT,CAAkBR,KAAlB,EAAyB;AAAE,UAAI;AAAEK,QAAAA,IAAI,CAACP,SAAS,CAAC,OAAD,CAAT,CAAmBE,KAAnB,CAAD,CAAJ;AAAkC,OAAxC,CAAyC,OAAOO,CAAP,EAAU;AAAEJ,QAAAA,MAAM,CAACI,CAAD,CAAN;AAAY;AAAE;;AAC9F,aAASF,IAAT,CAAcI,MAAd,EAAsB;AAAEA,MAAAA,MAAM,CAACC,IAAP,GAAcT,OAAO,CAACQ,MAAM,CAACT,KAAR,CAArB,GAAsCD,KAAK,CAACU,MAAM,CAACT,KAAR,CAAL,CAAoBW,IAApB,CAAyBP,SAAzB,EAAoCI,QAApC,CAAtC;AAAsF;;AAC9GH,IAAAA,IAAI,CAAC,CAACP,SAAS,GAAGA,SAAS,CAACc,KAAV,CAAgBjB,OAAhB,EAAyBC,UAAU,IAAI,EAAvC,CAAb,EAAyDU,IAAzD,EAAD,CAAJ;AACH,GALM,CAAP;AAMH,CARD;;AASA,OAAO,KAAKO,KAAZ,MAAuB,OAAvB;AACA,OAAOC,SAAP,MAAsB,aAAtB;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,SAASC,MAAT,QAAuB,SAAvB;AACA,OAAO,kBAAP;AACA,SAASC,WAAT,QAA4B,qBAA5B;AACA,SAASC,iBAAT,QAAkC,4BAAlC;AACA,SAASC,gBAAT,QAAiC,2BAAjC;AACA,SAASC,cAAT,QAA+B,yBAA/B;;AACA,MAAMC,aAAN,SAA4BR,KAAK,CAACS,SAAlC,CAA4C;AACxCC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACf,UAAMA,KAAN;;AACA,SAAKC,OAAL,GAAgBzB,KAAD,IAAW;AACtB,WAAK0B,IAAL,GAAY1B,KAAZ;AACH,KAFD;;AAGA,SAAK2B,UAAL,GAAkB,MAAM;AACpB,WAAKC,QAAL,CAAc;AAAEC,QAAAA,IAAI,EAAE;AAAR,OAAd,EAA8B,MAAM;AAChC,YAAIC,EAAJ;;AACA,SAACA,EAAE,GAAG,KAAKC,KAAL,CAAWC,OAAjB,MAA8B,IAA9B,IAAsCF,EAAE,KAAK,KAAK,CAAlD,GAAsD,KAAK,CAA3D,GAA+DA,EAAE,CAACG,KAAH,EAA/D;AACH,OAHD;AAIH,KALD;;AAMA,SAAKC,WAAL,GAAmB,MAAM;AACrB,WAAKN,QAAL,CAAc;AAAEC,QAAAA,IAAI,EAAE,KAAKL,KAAL,CAAWW,gBAAnB;AAAqCC,QAAAA,WAAW,EAAE,KAAlD;AAAyDC,QAAAA,QAAQ,EAAE;AAAnE,OAAd,EAA0F,MAAM;AAC5F,aAAKC,gBAAL,CAAsB,EAAtB;AACA,aAAKC,kBAAL,GAA0B,EAA1B;AACA,aAAKf,KAAL,CAAWgB,OAAX,IAAsB,KAAKhB,KAAL,CAAWgB,OAAX,CAAmB;AAAEC,UAAAA,KAAK,EAAE;AAAT,SAAnB,CAAtB;AACH,OAJD;AAKH,KAND;;AAOA,SAAKC,uBAAL,GAAgCnC,CAAD,IAAO;AAClCA,MAAAA,CAAC,CAACoC,cAAF;AACApC,MAAAA,CAAC,CAACqC,eAAF;AACA,WAAKC,KAAL,CAAWhB,IAAX,GAAkB,KAAKK,WAAL,EAAlB,GAAuC,KAAKP,UAAL,EAAvC;AACH,KAJD;;AAKA,SAAKmB,SAAL,GAAkBvC,CAAD,IAAO;AACpB,UAAIuB,EAAJ;;AACA,OAAC,CAACA,EAAE,GAAG,KAAKC,KAAL,CAAWC,OAAjB,MAA8B,IAA9B,IAAsCF,EAAE,KAAK,KAAK,CAAlD,GAAsD,KAAK,CAA3D,GAA+DA,EAAE,CAAC9B,KAAnE,MAA8E,EAA9E,IAAoF,CAAC,KAAK0B,IAA1F,IAAkG,KAAKQ,WAAL,EAAlG;AACH,KAHD;;AAIA,SAAKa,UAAL,GAAmBxC,CAAD,IAAO;AACrB,UAAIuB,EAAJ,EAAQkB,EAAR,EAAYC,EAAZ;;AACA,OAACnB,EAAE,GAAG,KAAKC,KAAL,CAAWC,OAAjB,MAA8B,IAA9B,IAAsCF,EAAE,KAAK,KAAK,CAAlD,GAAsD,KAAK,CAA3D,GAA+DA,EAAE,CAACG,KAAH,EAA/D;;AACA,UAAI,EAAE,CAACe,EAAE,GAAG,KAAKjB,KAAL,CAAWC,OAAjB,MAA8B,IAA9B,IAAsCgB,EAAE,KAAK,KAAK,CAAlD,GAAsD,KAAK,CAA3D,GAA+DA,EAAE,CAAChD,KAAH,CAASkD,UAAT,CAAoB,GAApB,CAAjE,KACA,KAAKC,QAAL,KAAkB,IADlB,IAEA,KAAKA,QAAL,KAAkB,EAFlB,IAGA,CAAC,CAACF,EAAE,GAAG,KAAKlB,KAAL,CAAWC,OAAjB,MAA8B,IAA9B,IAAsCiB,EAAE,KAAK,KAAK,CAAlD,GAAsD,KAAK,CAA3D,GAA+DA,EAAE,CAACjD,KAAnE,MAA8E,EAHlF,EAGsF;AAClF,aAAKuC,kBAAL,GAA0B,KAAKY,QAA/B;AACA,aAAKA,QAAL,GAAgB,IAAhB;AACA,aAAKvB,QAAL,CAAc;AAAES,UAAAA,QAAQ,EAAE;AAAZ,SAAd;AACH;AACJ,KAXD;;AAYA,SAAKe,UAAL,GAAmB7C,CAAD,IAAO;AACrBA,MAAAA,CAAC,CAAC8C,OAAF,KAAc,EAAd,IAAoB,KAAKC,aAAL,CAAmB,KAAKvB,KAAL,CAAWC,OAAX,CAAmBhC,KAAtC,CAApB;AACH,KAFD;;AAGA,SAAKuD,UAAL,GAAmBhD,CAAD,IAAO;AACrB,WAAK2B,WAAL;AACH,KAFD;;AAGA,SAAKsB,YAAL,GAAqBjD,CAAD,IAAOb,SAAS,CAAC,IAAD,EAAO,KAAK,CAAZ,EAAe,KAAK,CAApB,EAAuB,aAAa;AACpE,UAAI,CAAC,KAAKqC,KAAL,CAAWC,OAAX,CAAmBhC,KAAnB,CAAyBkD,UAAzB,CAAoC,GAApC,CAAL,EAA+C;AAC3C,YAAIO,MAAM,CAACC,SAAP,CAAiBC,cAAjB,CAAgCC,IAAhC,CAAqC,KAAKC,aAA1C,EAAyD,KAAK9B,KAAL,CAAWC,OAAX,CAAmBhC,KAA5E,CAAJ,EAAwF;AACpF,eAAKqC,QAAL,CAAc,KAAKwB,aAAL,CAAmB,KAAK9B,KAAL,CAAWC,OAAX,CAAmBhC,KAAtC,EAA6C8D,IAA3D;AACH,SAFD,MAGK;AACD,cAAI,KAAK/B,KAAL,CAAWC,OAAX,CAAmBhC,KAAnB,CAAyB+D,MAAzB,IAAmC,CAAvC,EAA0C;AACtC,iBAAK1B,QAAL,CAAc,cAAd;AACA,kBAAM2B,WAAW,GAAG,KAAKjC,KAAL,CAAWC,OAAX,CAAmBhC,KAAvC;AACA,kBAAMiE,QAAQ,GAAG,MAAM,KAAKC,QAAL,CAAcC,MAAd,CAAqBH,WAArB,CAAvB;;AACA,gBAAIC,QAAQ,CAACG,KAAb,EAAoB;AAChB,qBAAO,KAAP;AACH;;AACD,iBAAKP,aAAL,CAAmBG,WAAnB,IAAkCC,QAAlC;AACA,iBAAK5B,QAAL,CAAc4B,QAAQ,CAACH,IAAvB;AACH;AACJ;AACJ;AACJ,KAlBmC,CAApC;;AAmBA,SAAKO,SAAL,GAAiB,MAAM;AACnB,UAAIvC,EAAJ,EAAQkB,EAAR;;AACA,OAAC,KAAKH,KAAL,CAAWT,WAAZ,IAA2B,KAAKR,QAAL,CAAc;AAAEQ,QAAAA,WAAW,EAAE;AAAf,OAAd,CAA3B;;AACA,UAAI,CAAC,CAACN,EAAE,GAAG,KAAKC,KAAL,CAAWC,OAAjB,MAA8B,IAA9B,IAAsCF,EAAE,KAAK,KAAK,CAAlD,GAAsD,KAAK,CAA3D,GAA+DA,EAAE,CAAC9B,KAAnE,MAA8E,EAAlF,EAAsF;AAClF,aAAKsE,QAAL;AACA,aAAKzB,KAAL,CAAWT,WAAX,IAA0B,KAAKR,QAAL,CAAc;AAAEQ,UAAAA,WAAW,EAAE;AAAf,SAAd,CAA1B;AACH;;AACD,UAAI,EAAE,CAACY,EAAE,GAAG,KAAKjB,KAAL,CAAWC,OAAjB,MAA8B,IAA9B,IAAsCgB,EAAE,KAAK,KAAK,CAAlD,GAAsD,KAAK,CAA3D,GAA+DA,EAAE,CAAChD,KAAH,CAASkD,UAAT,CAAoB,GAApB,CAAjE,CAAJ,EAAgG,CAC/F;AACJ,KATD;;AAUA,SAAKqB,aAAL,GAAqB,CAACC,QAAD,EAAWC,SAAX,EAAsBC,WAAtB,KAAsC;AACvD,WAAKrC,QAAL,CAAcoC,SAAd,EAAyBC,WAAzB;AACA,WAAKlD,KAAL,CAAWgB,OAAX,IACI,KAAKhB,KAAL,CAAWgB,OAAX,CAAmB;AACfC,QAAAA,KAAK,EAAE,KADQ;AAEfkC,QAAAA,OAAO,EAAE;AACLC,UAAAA,MAAM,EAAE,IAAI5D,MAAJ,CAAW6D,MAAM,CAACL,QAAQ,CAACM,QAAV,CAAjB,EAAsCD,MAAM,CAACL,QAAQ,CAACO,SAAV,CAA5C,CADH;AAELjB,UAAAA,IAAI,EAAEU,QAAQ,CAACQ,IAFV;AAGLC,UAAAA,GAAG,EAAE,KAAKpB,aAAL,CAAmB,KAAK9B,KAAL,CAAWC,OAAX,CAAmBhC,KAAtC,EAA6CiF;AAH7C;AAFM,OAAnB,CADJ;;AASA,UAAI,KAAKzD,KAAL,CAAW0D,mBAAf,EAAoC;AAChC,aAAKZ,QAAL;AACH;AACJ,KAdD;;AAeA,SAAKa,YAAL,GAAoB,MAAM;AACtB,YAAMC,aAAa,GAAG,KAAK5D,KAAL,CAAW6D,GAAX,GAChB,KAAK7D,KAAL,CAAW6D,GAAX,CAAeC,YAAf,GAA8BC,qBAA9B,EADgB,GAEhBC,QAAQ,CAACC,IAAT,CAAcF,qBAAd,EAFN;AAGA,YAAMG,OAAO,GAAG,KAAK3D,KAAL,CAAWC,OAAX,CAAmBuD,qBAAnB,EAAhB;AACA,YAAMI,SAAS,GAAI,GAAEC,IAAI,CAACC,KAAL,CAAW,CAACT,aAAa,CAACU,MAAd,GAAuBJ,OAAO,CAACI,MAA/B,GAAwC,EAAzC,IAA+C,GAA1D,CAA+D,IAApF;AACA,WAAKC,SAAL,CAAe/D,OAAf,IAA0B,KAAK+D,SAAL,CAAe/D,OAAf,CAAuBgE,KAAjD,KAA2D,KAAKD,SAAL,CAAe/D,OAAf,CAAuBgE,KAAvB,CAA6BL,SAA7B,GAAyCA,SAApG;AACH,KAPD;;AAQA,SAAK9C,KAAL,GAAa;AACThB,MAAAA,IAAI,EAAE,KAAKL,KAAL,CAAWW,gBADR;AAETC,MAAAA,WAAW,EAAE,KAFJ;AAGTC,MAAAA,QAAQ,EAAE;AAHD,KAAb;AAKA,SAAKE,kBAAL,GAA0B,EAA1B;AACA,SAAKsB,aAAL,GAAqB,EAArB;AACA,SAAKV,QAAL,GAAgB,IAAhB;;AACA,SAAKb,gBAAL,GAAwB,MAAM,CAAG,CAAjC;;AACA,SAAKyD,SAAL,GAAiBlF,KAAK,CAACoF,SAAN,EAAjB;AACA,SAAKC,GAAL,GAAWrF,KAAK,CAACoF,SAAN,EAAX;AACA,SAAKlE,KAAL,GAAalB,KAAK,CAACoF,SAAN,EAAb,CA5Ge,CA6Gf;;AACA,QAAI,KAAKzE,KAAL,CAAW2E,cAAf,EAA+B;AAC3B,WAAKjC,QAAL,GAAgB,KAAK1C,KAAL,CAAW2E,cAA3B;AACH,KAFD,MAGK,IAAI,KAAK3E,KAAL,CAAW0C,QAAX,IAAuBT,MAAM,CAAC2C,IAAP,CAAYtF,SAAZ,EAAuBuF,QAAvB,CAAgC,KAAK7E,KAAL,CAAW0C,QAA3C,CAA3B,EAAiF;AAClF,YAAMoC,QAAQ,GAAGxF,SAAS,CAAC,KAAKU,KAAL,CAAW0C,QAAZ,CAA1B;AACA,WAAKA,QAAL,GAAgB,IAAIoC,QAAJ,CAAa,KAAK9E,KAAL,CAAW+E,eAAxB,CAAhB;AACH,KAHI,MAIA;AACD,YAAM,IAAIC,KAAJ,CAAW,gCAA+B,KAAKhF,KAAL,CAAW0C,QAAS,mDAAkDT,MAAM,CAAC2C,IAAP,CAAYtF,SAAZ,EAAuB2F,IAAvB,CAA4B,IAA5B,CAAkC,EAAlJ,CAAN;AACH;AACJ;;AACDnD,EAAAA,aAAa,CAACtD,KAAD,EAAQ;AACjB,QAAIA,KAAK,CAACkD,UAAN,CAAiB,GAAjB,CAAJ,EAA2B;AACvB,YAAM0B,MAAM,GAAG5E,KAAK,CACf0G,KADU,CACJ,CADI,EAEVC,KAFU,CAEJ,GAFI,EAGVC,MAHU,CAGFrG,CAAD,IAAO,CAACsG,KAAK,CAAChC,MAAM,CAACtE,CAAD,CAAP,CAHV,EAIV8E,GAJU,CAIL9E,CAAD,IAAOsE,MAAM,CAACtE,CAAC,GAAGA,CAAH,GAAO,CAAT,CAJP,CAAf;;AAKA,UAAIqE,MAAM,CAACb,MAAP,IAAiB,CAArB,EAAwB;AACpB,aAAK1B,QAAL,CAAc,+BAAd;AACH,OAFD,MAGK;AACD,aAAKiC,QAAL;AACA,aAAK9C,KAAL,CAAWgB,OAAX,IACI,KAAKhB,KAAL,CAAWgB,OAAX,CAAmB;AACfC,UAAAA,KAAK,EAAE,KADQ;AAEfkC,UAAAA,OAAO,EAAE;AACLC,YAAAA,MAAM,EAAE,IAAI5D,MAAJ,CAAW6D,MAAM,CAACD,MAAM,CAAC,CAAD,CAAP,CAAjB,EAA8BC,MAAM,CAACD,MAAM,CAAC,CAAD,CAAP,CAApC,CADH;AAELd,YAAAA,IAAI,EAAEc,MAAM,CAAC6B,IAAP,CAAY,GAAZ,CAFD;AAGLxB,YAAAA,GAAG,EAAEL,MAAM,CAAC6B,IAAP,CAAY,GAAZ;AAHA;AAFM,SAAnB,CADJ;AASH;AACJ,KArBD,MAsBK;AACD,UAAI,KAAK1E,KAAL,CAAWC,OAAX,CAAmBhC,KAAnB,CAAyB+D,MAAzB,GAAkC,CAAtC,EAAyC;AACrC,cAAME,QAAQ,GAAG,iFAAjB;AACA,aAAK5B,QAAL,CAAc4B,QAAd;AACH;AACJ;AACJ;;AACDK,EAAAA,QAAQ,GAAG;AACP,SAAKnB,QAAL,GAAgB,KAAKZ,kBAArB;AACA,SAAKA,kBAAL,GAA0B,EAA1B;AACA,SAAKX,QAAL,CAAc;AAAES,MAAAA,QAAQ,EAAE;AAAZ,KAAd;AACH;;AACDA,EAAAA,QAAQ,CAACyB,IAAD,EAAOY,WAAP,EAAoB;AACxB,QAAI5C,EAAJ,CADwB,CAExB;;;AACA,SAAKS,kBAAL,GAA2B1B,KAAK,CAACiG,aAAN,CAAoB1F,cAApB,EAAoC;AAAE2F,MAAAA,GAAG,EAAE,KAAKhB,SAAZ;AAAuBrB,MAAAA,WAAW,EAAEA,WAApC;AAAiDsC,MAAAA,IAAI,EAAElD,IAAvD;AAA6DtB,MAAAA,OAAO,EAAE,KAAK+B,aAA3E;AAA0F0C,MAAAA,QAAQ,EAAE,KAAKzF,KAAL,CAAWyF,QAAX,KAAwBC,SAAxB,GAAoC,KAAK1F,KAAL,CAAWyF,QAAX,GAAsB,CAA1D,GAA8D;AAAlK,KAApC,CAA3B;AACA,KAAC,CAACnF,EAAE,GAAG,KAAKC,KAAL,CAAWC,OAAjB,MAA8B,IAA9B,IAAsCF,EAAE,KAAK,KAAK,CAAlD,GAAsD,KAAK,CAA3D,GAA+DA,EAAE,CAAC9B,KAAnE,KAA6E,KAAK4B,QAAL,CAAc;AAAES,MAAAA,QAAQ,EAAE;AAAZ,KAAd,CAA7E;AACH;;AACD8E,EAAAA,iBAAiB,GAAG;AAChB,SAAKhC,YAAL;;AACA,QAAI,KAAK3D,KAAL,CAAW2C,MAAX,IAAqB,CAAC0C,KAAK,CAAChC,MAAM,CAAC,KAAKrD,KAAL,CAAW2C,MAAX,CAAkBiD,GAAnB,CAAP,CAA3B,IAA8D,CAACP,KAAK,CAAChC,MAAM,CAAC,KAAKrD,KAAL,CAAW2C,MAAX,CAAkBkD,GAAnB,CAAP,CAAxE,EAAyG;AACrG,YAAMC,UAAU,GAAI,IAAG,KAAK9F,KAAL,CAAW2C,MAAX,CAAkBiD,GAAI,IAAG,KAAK5F,KAAL,CAAW2C,MAAX,CAAkBkD,GAAI,EAAtE;AACA,WAAK/E,gBAAL,CAAsBgF,UAAtB;AACA,WAAK3F,UAAL;AACA,WAAK0C,SAAL,GAJqG,CAInF;;AAClB,WAAK7C,KAAL,CAAWgB,OAAX,IACI,KAAKhB,KAAL,CAAWgB,OAAX,CAAmB;AACfC,QAAAA,KAAK,EAAE,KADQ;AAEfkC,QAAAA,OAAO,EAAE;AACLC,UAAAA,MAAM,EAAE,IAAI5D,MAAJ,CAAW6D,MAAM,CAAC,KAAKrD,KAAL,CAAW2C,MAAX,CAAkBiD,GAAnB,CAAjB,EAA0CvC,MAAM,CAAC,KAAKrD,KAAL,CAAW2C,MAAX,CAAkBkD,GAAnB,CAAhD,CADH;AAELvD,UAAAA,IAAI,EAAEwD,UAFD;AAGLrC,UAAAA,GAAG,EAAE,KAAKzD,KAAL,CAAW2C;AAHX;AAFM,OAAnB,CADJ;AASH;AACJ;;AACDoD,EAAAA,kBAAkB,GAAG;AACjB,SAAKpC,YAAL;;AACA,QAAI,KAAKtC,KAAL,CAAWR,QAAf,EAAyB,CACrB;AACH;AACJ;;AACDmF,EAAAA,MAAM,GAAG;AACL,WAAQ3G,KAAK,CAACiG,aAAN,CAAoB,SAApB,EAA+B;AAAEW,MAAAA,SAAS,EAAG,GAAE,KAAKjG,KAAL,CAAWiG,SAAX,GAAwB,GAAE,KAAKjG,KAAL,CAAWiG,SAAU,GAA/C,GAAoD,EAAG;AAAvE,KAA/B,EACJ5G,KAAK,CAACiG,aAAN,CAAoB,SAApB,EAA+B;AAAEW,MAAAA,SAAS,EAAG,iBAAgB,KAAK5E,KAAL,CAAWhB,IAAX,GAAkB,wBAAlB,GAA6C,EAAG;AAA9E,KAA/B,EACIhB,KAAK,CAACiG,aAAN,CAAoB3F,gBAApB,EAAsC;AAAEsG,MAAAA,SAAS,EAAE,4BAAb;AAA2CC,MAAAA,OAAO,EAAE,KAAKhF,uBAAzD;AAAkFiF,MAAAA,YAAY,EAAE,MAAM,KAAKlG,OAAL,CAAa,IAAb,CAAtG;AAA0HmG,MAAAA,YAAY,EAAE,MAAM,KAAKnG,OAAL,CAAa,KAAb;AAA9I,KAAtC,CADJ,EAEIZ,KAAK,CAACiG,aAAN,CAAoB7F,WAApB,EAAiC;AAAEgG,MAAAA,QAAQ,EAAE,KAAKzF,KAAL,CAAWyF,QAAX,KAAwBC,SAAxB,GAAoC,KAAK1F,KAAL,CAAWyF,QAA/C,GAA0D,CAAtE;AAAyEF,MAAAA,GAAG,EAAE,KAAKhF,KAAnF;AAA0F8F,MAAAA,mBAAmB,EAAGC,EAAD,IAAS,KAAKxF,gBAAL,GAAwBwF,EAAhJ;AAAqJL,MAAAA,SAAS,EAAE,sBAAhK;AAAwLM,MAAAA,WAAW,EAAE,KAAKvG,KAAL,CAAWwG,gBAAhN;AAAkON,MAAAA,OAAO,EAAE,KAAK3E,UAAhP;AAA4P4E,MAAAA,YAAY,EAAE,MAAM,KAAKlG,OAAL,CAAa,IAAb,CAAhR;AAAoSmG,MAAAA,YAAY,EAAE,MAAM,KAAKnG,OAAL,CAAa,KAAb,CAAxT;AAA6UwG,MAAAA,QAAQ,EAAE,KAAK5D,SAA5V;AAAuW6D,MAAAA,aAAa,EAAE,KAAK1E,YAA3X;AAAyY2E,MAAAA,MAAM,EAAE,KAAKrF,SAAtZ;AAAiasF,MAAAA,OAAO,EAAE,KAAKhF,UAA/a;AAA2biF,MAAAA,UAAU,EAAG9H,CAAD,IAAO;AACveA,QAAAA,CAAC,CAACqC,eAAF;AACArC,QAAAA,CAAC,CAAC8C,OAAF,KAAc,EAAd,IAAoB9C,CAAC,CAACoC,cAAF,EAApB;AACH,OAH4B;AAG1B2F,MAAAA,SAAS,EAAG/H,CAAD,IAAO;AACjB,YAAIuB,EAAJ,CADiB,CAEjB;;;AACA,YAAIvB,CAAC,CAAC8C,OAAF,KAAc,EAAlB,EAAsB;AAClB9C,UAAAA,CAAC,CAACoC,cAAF;AACApC,UAAAA,CAAC,CAACqC,eAAF;AACA,WAACd,EAAE,GAAG,KAAKiE,SAAL,CAAe/D,OAArB,MAAkC,IAAlC,IAA0CF,EAAE,KAAK,KAAK,CAAtD,GAA0D,KAAK,CAA/D,GAAmEA,EAAE,CAACG,KAAH,EAAnE;AACH,SAPgB,CAQjB;;AACH,OAZ4B;AAY1BsG,MAAAA,QAAQ,EAAGhI,CAAD,IAAOA,CAAC,CAACoC,cAAF;AAZS,KAAjC,CAFJ,EAeI9B,KAAK,CAACiG,aAAN,CAAoB5F,iBAApB,EAAuC;AAAEuG,MAAAA,SAAS,EAAE,KAAK5E,KAAL,CAAWT,WAAX,GAAyB,qCAAzB,GAAiE,EAA9E;AAAkFsF,MAAAA,OAAO,EAAE,KAAKnE;AAAhG,KAAvC,CAfJ,CADI,EAiBJ1C,KAAK,CAACiG,aAAN,CAAoB,SAApB,EAA+B;AAAEW,MAAAA,SAAS,EAAG,8BAA6B,KAAK5E,KAAL,CAAWR,QAAX,GAAsB,EAAtB,GAA2B,oCAAqC;AAA3G,KAA/B,EACIxB,KAAK,CAACiG,aAAN,CAAoB,SAApB,EAA+B;AAAEC,MAAAA,GAAG,EAAE,KAAKb,GAAZ;AAAiBuB,MAAAA,SAAS,EAAG;AAA7B,KAA/B,EAAoF,KAAK5E,KAAL,CAAWR,QAAX,IAAuB,KAAKE,kBAAhH,CADJ,CAjBI,CAAR;AAmBH;;AA/MuC;;AAiN5ClB,aAAa,CAACmH,SAAd,GAA0B;AACtBtE,EAAAA,QAAQ,EAAEnD,SAAS,CAAC0H,MADE;AAEtBC,EAAAA,WAAW,EAAE3H,SAAS,CAAC0H,MAFD;AAGtBT,EAAAA,gBAAgB,EAAEjH,SAAS,CAAC0H,MAHN;AAItBE,EAAAA,MAAM,EAAE5H,SAAS,CAAC6H,OAAV,CAAkB7H,SAAS,CAAC8H,MAA5B,CAJc;AAKtB3D,EAAAA,mBAAmB,EAAEnE,SAAS,CAAC+H,IALT;AAMtB3G,EAAAA,gBAAgB,EAAEpB,SAAS,CAAC+H,IANN;AAOtBC,EAAAA,YAAY,EAAEhI,SAAS,CAACiI,KAPF;AAQtBzC,EAAAA,eAAe,EAAExF,SAAS,CAACkI;AARL,CAA1B;AAUA5H,aAAa,CAAC6H,YAAd,GAA6B;AACzBlB,EAAAA,gBAAgB,EAAE,gBADO;AAEzB9C,EAAAA,mBAAmB,EAAE,KAFI;AAGzB/C,EAAAA,gBAAgB,EAAE,KAHO;AAIzBgC,EAAAA,MAAM,EAAE+C,SAJiB;AAKzBhD,EAAAA,QAAQ,EAAE;AALe,CAA7B;AAOA,SAAS7C,aAAT","sourcesContent":["var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport * as React from \"react\";\nimport Providers from \"./Providers\";\nimport PropTypes from \"prop-types\";\nimport { LatLng } from \"leaflet\";\nimport \"../css/index.css\";\nimport { SearchInput } from \"./core/search-input\";\nimport { SearchCloseButton } from \"./core/search-close-button\";\nimport { SearchIconButton } from \"./core/search-icon-button\";\nimport { SearchInfoList } from \"./core/search-info-list\";\nclass SearchControl extends React.Component {\n    constructor(props) {\n        super(props);\n        this.setLock = (value) => {\n            this.lock = value;\n        };\n        this.openSearch = () => {\n            this.setState({ open: true }, () => {\n                var _a;\n                (_a = this.input.current) === null || _a === void 0 ? void 0 : _a.focus();\n            });\n        };\n        this.closeSearch = () => {\n            this.setState({ open: this.props.openSearchOnLoad, closeButton: false, showInfo: false }, () => {\n                this.inputValueSetter(\"\");\n                this.SearchResponseInfo = \"\";\n                this.props.handler && this.props.handler({ event: \"remove\" });\n            });\n        };\n        this.searchIconButtonOnClick = (e) => {\n            e.preventDefault();\n            e.stopPropagation();\n            this.state.open ? this.closeSearch() : this.openSearch();\n        };\n        this.inputBlur = (e) => {\n            var _a;\n            ((_a = this.input.current) === null || _a === void 0 ? void 0 : _a.value) === \"\" && !this.lock && this.closeSearch();\n        };\n        this.inputClick = (e) => {\n            var _a, _b, _c;\n            (_a = this.input.current) === null || _a === void 0 ? void 0 : _a.focus();\n            if (!((_b = this.input.current) === null || _b === void 0 ? void 0 : _b.value.startsWith(\":\")) &&\n                this.lastInfo !== null &&\n                this.lastInfo !== \"\" &&\n                ((_c = this.input.current) === null || _c === void 0 ? void 0 : _c.value) !== \"\") {\n                this.SearchResponseInfo = this.lastInfo;\n                this.lastInfo = null;\n                this.setState({ showInfo: true });\n            }\n        };\n        this.inputKeyUp = (e) => {\n            e.keyCode === 13 && this.beautifyValue(this.input.current.value);\n        };\n        this.closeClick = (e) => {\n            this.closeSearch();\n        };\n        this.sendToAction = (e) => __awaiter(this, void 0, void 0, function* () {\n            if (!this.input.current.value.startsWith(\":\")) {\n                if (Object.prototype.hasOwnProperty.call(this.responseCache, this.input.current.value)) {\n                    this.showInfo(this.responseCache[this.input.current.value].info);\n                }\n                else {\n                    if (this.input.current.value.length >= 3) {\n                        this.showInfo(\"Searching...\");\n                        const searchValue = this.input.current.value;\n                        const response = yield this.provider.search(searchValue);\n                        if (response.error) {\n                            return false;\n                        }\n                        this.responseCache[searchValue] = response;\n                        this.showInfo(response.info);\n                    }\n                }\n            }\n        });\n        this.syncInput = () => {\n            var _a, _b;\n            !this.state.closeButton && this.setState({ closeButton: true });\n            if (((_a = this.input.current) === null || _a === void 0 ? void 0 : _a.value) === \"\") {\n                this.hideInfo();\n                this.state.closeButton && this.setState({ closeButton: false });\n            }\n            if (!((_b = this.input.current) === null || _b === void 0 ? void 0 : _b.value.startsWith(\":\"))) {\n            }\n        };\n        this.listItemClick = (itemData, totalInfo, activeIndex) => {\n            this.showInfo(totalInfo, activeIndex);\n            this.props.handler &&\n                this.props.handler({\n                    event: \"add\",\n                    payload: {\n                        latLng: new LatLng(Number(itemData.latitude), Number(itemData.longitude)),\n                        info: itemData.name,\n                        raw: this.responseCache[this.input.current.value].raw,\n                    },\n                });\n            if (this.props.closeResultsOnClick) {\n                this.hideInfo();\n            }\n        };\n        this.setMaxHeight = () => {\n            const containerRect = this.props.map\n                ? this.props.map.getContainer().getBoundingClientRect()\n                : document.body.getBoundingClientRect();\n            const divRect = this.input.current.getBoundingClientRect();\n            const maxHeight = `${Math.floor((containerRect.bottom - divRect.bottom - 10) * 0.6)}px`;\n            this.selectbox.current && this.selectbox.current.style && (this.selectbox.current.style.maxHeight = maxHeight);\n        };\n        this.state = {\n            open: this.props.openSearchOnLoad,\n            closeButton: false,\n            showInfo: false,\n        };\n        this.SearchResponseInfo = \"\";\n        this.responseCache = {};\n        this.lastInfo = null;\n        this.inputValueSetter = () => { };\n        this.selectbox = React.createRef();\n        this.div = React.createRef();\n        this.input = React.createRef();\n        // use custom provider if exists any\n        if (this.props.customProvider) {\n            this.provider = this.props.customProvider;\n        }\n        else if (this.props.provider && Object.keys(Providers).includes(this.props.provider)) {\n            const Provider = Providers[this.props.provider];\n            this.provider = new Provider(this.props.providerOptions);\n        }\n        else {\n            throw new Error(`You set the provider prop to ${this.props.provider} but that isn't recognised. You can choose from ${Object.keys(Providers).join(\", \")}`);\n        }\n    }\n    beautifyValue(value) {\n        if (value.startsWith(\":\")) {\n            const latLng = value\n                .slice(1)\n                .split(\",\")\n                .filter((e) => !isNaN(Number(e)))\n                .map((e) => Number(e ? e : 0));\n            if (latLng.length <= 1) {\n                this.showInfo(\"Please enter a valid lat, lng\");\n            }\n            else {\n                this.hideInfo();\n                this.props.handler &&\n                    this.props.handler({\n                        event: \"add\",\n                        payload: {\n                            latLng: new LatLng(Number(latLng[0]), Number(latLng[1])),\n                            info: latLng.join(\",\"),\n                            raw: latLng.join(\",\"),\n                        },\n                    });\n            }\n        }\n        else {\n            if (this.input.current.value.length < 3) {\n                const response = 'Please enter a valid lat,lng starting with \":\" or minimum 3 character to search';\n                this.showInfo(response);\n            }\n        }\n    }\n    hideInfo() {\n        this.lastInfo = this.SearchResponseInfo;\n        this.SearchResponseInfo = \"\";\n        this.setState({ showInfo: false });\n    }\n    showInfo(info, activeIndex) {\n        var _a;\n        // key changes when info changes so candidate number starts from zero\n        this.SearchResponseInfo = (React.createElement(SearchInfoList, { ref: this.selectbox, activeIndex: activeIndex, list: info, handler: this.listItemClick, tabIndex: this.props.tabIndex !== undefined ? this.props.tabIndex + 1 : 2 }));\n        ((_a = this.input.current) === null || _a === void 0 ? void 0 : _a.value) && this.setState({ showInfo: true });\n    }\n    componentDidMount() {\n        this.setMaxHeight();\n        if (this.props.search && !isNaN(Number(this.props.search.lat)) && !isNaN(Number(this.props.search.lng))) {\n            const inputValue = `:${this.props.search.lat},${this.props.search.lng}`;\n            this.inputValueSetter(inputValue);\n            this.openSearch();\n            this.syncInput(); // to show close button\n            this.props.handler &&\n                this.props.handler({\n                    event: \"add\",\n                    payload: {\n                        latLng: new LatLng(Number(this.props.search.lat), Number(this.props.search.lng)),\n                        info: inputValue,\n                        raw: this.props.search,\n                    },\n                });\n        }\n    }\n    componentDidUpdate() {\n        this.setMaxHeight();\n        if (this.state.showInfo) {\n            // this.selectbox.current && this.selectbox.current.focus();\n        }\n    }\n    render() {\n        return (React.createElement(\"article\", { className: `${this.props.className ? `${this.props.className} ` : \"\"}search-control-wrap` },\n            React.createElement(\"section\", { className: `search-control${this.state.open ? \" search-control-active\" : \"\"}` },\n                React.createElement(SearchIconButton, { className: \"search-control-icon-button\", onClick: this.searchIconButtonOnClick, onMouseEnter: () => this.setLock(true), onMouseLeave: () => this.setLock(false) }),\n                React.createElement(SearchInput, { tabIndex: this.props.tabIndex !== undefined ? this.props.tabIndex : 1, ref: this.input, getInputValueSetter: (fn) => (this.inputValueSetter = fn), className: \"search-control-input\", placeholder: this.props.inputPlaceholder, onClick: this.inputClick, onMouseEnter: () => this.setLock(true), onMouseLeave: () => this.setLock(false), onChange: this.syncInput, onChangeAsync: this.sendToAction, onBlur: this.inputBlur, onKeyUp: this.inputKeyUp, onKeyPress: (e) => {\n                        e.stopPropagation();\n                        e.keyCode === 40 && e.preventDefault();\n                    }, onKeyDown: (e) => {\n                        var _a;\n                        // ArrowDown 40\n                        if (e.keyCode === 40) {\n                            e.preventDefault();\n                            e.stopPropagation();\n                            (_a = this.selectbox.current) === null || _a === void 0 ? void 0 : _a.focus();\n                        }\n                        // ArrowUp 38\n                    }, onSubmit: (e) => e.preventDefault() }),\n                React.createElement(SearchCloseButton, { className: this.state.closeButton ? \" search-control-close-button-active\" : \"\", onClick: this.closeClick })),\n            React.createElement(\"section\", { className: `search-control-info-wrapper${this.state.showInfo ? \"\" : \" search-control-info-wrapper-close\"}` },\n                React.createElement(\"section\", { ref: this.div, className: `search-control-info` }, this.state.showInfo && this.SearchResponseInfo))));\n    }\n}\nSearchControl.propTypes = {\n    provider: PropTypes.string,\n    providerKey: PropTypes.string,\n    inputPlaceholder: PropTypes.string,\n    coords: PropTypes.arrayOf(PropTypes.number),\n    closeResultsOnClick: PropTypes.bool,\n    openSearchOnLoad: PropTypes.bool,\n    searchBounds: PropTypes.array,\n    providerOptions: PropTypes.object,\n};\nSearchControl.defaultProps = {\n    inputPlaceholder: \"Search Lat,Lng\",\n    closeResultsOnClick: false,\n    openSearchOnLoad: false,\n    search: undefined,\n    provider: \"OpenStreetMap\",\n};\nexport { SearchControl };\n"]},"metadata":{},"sourceType":"module"}