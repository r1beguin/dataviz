{"ast":null,"code":"import React from \"react\";\n\nconst SearchInfoListItem = ({\n  value,\n  className,\n  candidate,\n  onClick,\n  onKeyDown,\n  children\n}) => {\n  const r = React.useRef(null);\n  React.useEffect(() => {\n    if (value === candidate && r.current && r.current.offsetParent) {\n      r.current.scrollIntoView({\n        behavior: \"smooth\",\n        block: \"nearest\"\n      });\n    }\n  }, [candidate, value]);\n  return React.createElement(\"li\", {\n    ref: r,\n    value: value,\n    className: className,\n    onClick: onClick,\n    onKeyDown: onKeyDown\n  }, children);\n};\n\nconst SearchInfoListCore = (props, ref) => {\n  const {\n    handler,\n    list,\n    tabIndex,\n    activeIndex\n  } = props;\n  const [cand, setCand] = React.useState(0);\n  const arrowKeyHandler = React.useCallback(e => {\n    if (Array.isArray(list)) {\n      e.stopPropagation();\n      e.keyCode !== 9 && e.preventDefault(); // don't prevent tab\n\n      const length = list.length; // Enter 13, Spacebar 32\n\n      if (!(length <= cand || cand < 0) && e.keyCode === 13 || e.keyCode === 32) {\n        handler(list[cand], list, cand);\n      } else {\n        const c = length <= cand || cand < 0 ? 0 : cand; // ArrowUp 38\n\n        if (e.keyCode === 38) {\n          setCand(c === 0 ? list.length - 1 : c - 1);\n        } // ArrowDown 40\n        else if (e.keyCode === 40) {\n            setCand(c + 1 === list.length ? 0 : c + 1);\n          }\n      }\n    }\n  }, [setCand, cand, list, handler]);\n  React.useLayoutEffect(() => setCand(0), [list]);\n  return Array.isArray(list) ? React.createElement(\"ul\", Object.assign({\n    ref: ref\n  }, tabIndex !== undefined ? {\n    tabIndex: props.tabIndex\n  } : {}, {\n    className: \"search-control-info-list\",\n    onKeyDown: arrowKeyHandler\n  }), list.map((item, i) => React.createElement(SearchInfoListItem, {\n    value: i,\n    candidate: cand,\n    key: `${item.name}-${i}`,\n    className: `search-control-info-list-item${i === activeIndex || item.checked ? \" active\" : \"\"}${cand === i ? \" candidate\" : \"\"}`,\n    onClick: () => {\n      setCand(i);\n      handler(item, list, i);\n    },\n    onKeyDown: arrowKeyHandler\n  }, item.name))) : React.createElement(\"span\", {\n    className: \"search-control-info-span\"\n  }, list);\n};\n\nSearchInfoListCore.displayName = \"SearchInfoList\";\nconst SearchInfoList = React.forwardRef(SearchInfoListCore);\nexport { SearchInfoList };","map":{"version":3,"sources":["/Users/erwanbeguin/Documents/Developper/ynov/dataviz/node_modules/react-leaflet-search/lib/core/search-info-list.js"],"names":["React","SearchInfoListItem","value","className","candidate","onClick","onKeyDown","children","r","useRef","useEffect","current","offsetParent","scrollIntoView","behavior","block","createElement","ref","SearchInfoListCore","props","handler","list","tabIndex","activeIndex","cand","setCand","useState","arrowKeyHandler","useCallback","e","Array","isArray","stopPropagation","keyCode","preventDefault","length","c","useLayoutEffect","Object","assign","undefined","map","item","i","key","name","checked","displayName","SearchInfoList","forwardRef"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;;AACA,MAAMC,kBAAkB,GAAG,CAAC;AAAEC,EAAAA,KAAF;AAASC,EAAAA,SAAT;AAAoBC,EAAAA,SAApB;AAA+BC,EAAAA,OAA/B;AAAwCC,EAAAA,SAAxC;AAAmDC,EAAAA;AAAnD,CAAD,KAAoE;AAC3F,QAAMC,CAAC,GAAGR,KAAK,CAACS,MAAN,CAAa,IAAb,CAAV;AACAT,EAAAA,KAAK,CAACU,SAAN,CAAgB,MAAM;AAClB,QAAIR,KAAK,KAAKE,SAAV,IAAuBI,CAAC,CAACG,OAAzB,IAAoCH,CAAC,CAACG,OAAF,CAAUC,YAAlD,EAAgE;AAC5DJ,MAAAA,CAAC,CAACG,OAAF,CAAUE,cAAV,CAAyB;AAAEC,QAAAA,QAAQ,EAAE,QAAZ;AAAsBC,QAAAA,KAAK,EAAE;AAA7B,OAAzB;AACH;AACJ,GAJD,EAIG,CAACX,SAAD,EAAYF,KAAZ,CAJH;AAKA,SAAQF,KAAK,CAACgB,aAAN,CAAoB,IAApB,EAA0B;AAAEC,IAAAA,GAAG,EAAET,CAAP;AAAUN,IAAAA,KAAK,EAAEA,KAAjB;AAAwBC,IAAAA,SAAS,EAAEA,SAAnC;AAA8CE,IAAAA,OAAO,EAAEA,OAAvD;AAAgEC,IAAAA,SAAS,EAAEA;AAA3E,GAA1B,EAAkHC,QAAlH,CAAR;AACH,CARD;;AASA,MAAMW,kBAAkB,GAAG,CAACC,KAAD,EAAQF,GAAR,KAAgB;AACvC,QAAM;AAAEG,IAAAA,OAAF;AAAWC,IAAAA,IAAX;AAAiBC,IAAAA,QAAjB;AAA2BC,IAAAA;AAA3B,MAA2CJ,KAAjD;AACA,QAAM,CAACK,IAAD,EAAOC,OAAP,IAAkBzB,KAAK,CAAC0B,QAAN,CAAe,CAAf,CAAxB;AACA,QAAMC,eAAe,GAAG3B,KAAK,CAAC4B,WAAN,CAAmBC,CAAD,IAAO;AAC7C,QAAIC,KAAK,CAACC,OAAN,CAAcV,IAAd,CAAJ,EAAyB;AACrBQ,MAAAA,CAAC,CAACG,eAAF;AACAH,MAAAA,CAAC,CAACI,OAAF,KAAc,CAAd,IAAmBJ,CAAC,CAACK,cAAF,EAAnB,CAFqB,CAEkB;;AACvC,YAAMC,MAAM,GAAGd,IAAI,CAACc,MAApB,CAHqB,CAIrB;;AACA,UAAK,EAAEA,MAAM,IAAIX,IAAV,IAAkBA,IAAI,GAAG,CAA3B,KAAiCK,CAAC,CAACI,OAAF,KAAc,EAAhD,IAAuDJ,CAAC,CAACI,OAAF,KAAc,EAAzE,EAA6E;AACzEb,QAAAA,OAAO,CAACC,IAAI,CAACG,IAAD,CAAL,EAAaH,IAAb,EAAmBG,IAAnB,CAAP;AACH,OAFD,MAGK;AACD,cAAMY,CAAC,GAAGD,MAAM,IAAIX,IAAV,IAAkBA,IAAI,GAAG,CAAzB,GAA6B,CAA7B,GAAiCA,IAA3C,CADC,CAED;;AACA,YAAIK,CAAC,CAACI,OAAF,KAAc,EAAlB,EAAsB;AAClBR,UAAAA,OAAO,CAACW,CAAC,KAAK,CAAN,GAAUf,IAAI,CAACc,MAAL,GAAc,CAAxB,GAA4BC,CAAC,GAAG,CAAjC,CAAP;AACH,SAFD,CAGA;AAHA,aAIK,IAAIP,CAAC,CAACI,OAAF,KAAc,EAAlB,EAAsB;AACvBR,YAAAA,OAAO,CAACW,CAAC,GAAG,CAAJ,KAAUf,IAAI,CAACc,MAAf,GAAwB,CAAxB,GAA4BC,CAAC,GAAG,CAAjC,CAAP;AACH;AACJ;AACJ;AACJ,GArBuB,EAqBrB,CAACX,OAAD,EAAUD,IAAV,EAAgBH,IAAhB,EAAsBD,OAAtB,CArBqB,CAAxB;AAsBApB,EAAAA,KAAK,CAACqC,eAAN,CAAsB,MAAMZ,OAAO,CAAC,CAAD,CAAnC,EAAwC,CAACJ,IAAD,CAAxC;AACA,SAAOS,KAAK,CAACC,OAAN,CAAcV,IAAd,IAAuBrB,KAAK,CAACgB,aAAN,CAAoB,IAApB,EAA0BsB,MAAM,CAACC,MAAP,CAAc;AAAEtB,IAAAA,GAAG,EAAEA;AAAP,GAAd,EAA6BK,QAAQ,KAAKkB,SAAb,GAAyB;AAAElB,IAAAA,QAAQ,EAAEH,KAAK,CAACG;AAAlB,GAAzB,GAAwD,EAArF,EAA0F;AAAEnB,IAAAA,SAAS,EAAE,0BAAb;AAAyCG,IAAAA,SAAS,EAAEqB;AAApD,GAA1F,CAA1B,EAA4LN,IAAI,CAACoB,GAAL,CAAS,CAACC,IAAD,EAAOC,CAAP,KAAc3C,KAAK,CAACgB,aAAN,CAAoBf,kBAApB,EAAwC;AAAEC,IAAAA,KAAK,EAAEyC,CAAT;AAAYvC,IAAAA,SAAS,EAAEoB,IAAvB;AAA6BoB,IAAAA,GAAG,EAAG,GAAEF,IAAI,CAACG,IAAK,IAAGF,CAAE,EAApD;AAAuDxC,IAAAA,SAAS,EAAG,gCAA+BwC,CAAC,KAAKpB,WAAN,IAAqBmB,IAAI,CAACI,OAA1B,GAAoC,SAApC,GAAgD,EAAG,GAAEtB,IAAI,KAAKmB,CAAT,GAAa,YAAb,GAA4B,EAAG,EAAtL;AAAyLtC,IAAAA,OAAO,EAAE,MAAM;AACzdoB,MAAAA,OAAO,CAACkB,CAAD,CAAP;AACAvB,MAAAA,OAAO,CAACsB,IAAD,EAAOrB,IAAP,EAAasB,CAAb,CAAP;AACH,KAHoR;AAGlRrC,IAAAA,SAAS,EAAEqB;AAHuQ,GAAxC,EAG5Me,IAAI,CAACG,IAHuM,CAAvB,CAA5L,CAAvB,GAGgD7C,KAAK,CAACgB,aAAN,CAAoB,MAApB,EAA4B;AAAEb,IAAAA,SAAS,EAAE;AAAb,GAA5B,EAAuEkB,IAAvE,CAHvD;AAIH,CA9BD;;AA+BAH,kBAAkB,CAAC6B,WAAnB,GAAiC,gBAAjC;AACA,MAAMC,cAAc,GAAGhD,KAAK,CAACiD,UAAN,CAAiB/B,kBAAjB,CAAvB;AACA,SAAS8B,cAAT","sourcesContent":["import React from \"react\";\nconst SearchInfoListItem = ({ value, className, candidate, onClick, onKeyDown, children, }) => {\n    const r = React.useRef(null);\n    React.useEffect(() => {\n        if (value === candidate && r.current && r.current.offsetParent) {\n            r.current.scrollIntoView({ behavior: \"smooth\", block: \"nearest\" });\n        }\n    }, [candidate, value]);\n    return (React.createElement(\"li\", { ref: r, value: value, className: className, onClick: onClick, onKeyDown: onKeyDown }, children));\n};\nconst SearchInfoListCore = (props, ref) => {\n    const { handler, list, tabIndex, activeIndex } = props;\n    const [cand, setCand] = React.useState(0);\n    const arrowKeyHandler = React.useCallback((e) => {\n        if (Array.isArray(list)) {\n            e.stopPropagation();\n            e.keyCode !== 9 && e.preventDefault(); // don't prevent tab\n            const length = list.length;\n            // Enter 13, Spacebar 32\n            if ((!(length <= cand || cand < 0) && e.keyCode === 13) || e.keyCode === 32) {\n                handler(list[cand], list, cand);\n            }\n            else {\n                const c = length <= cand || cand < 0 ? 0 : cand;\n                // ArrowUp 38\n                if (e.keyCode === 38) {\n                    setCand(c === 0 ? list.length - 1 : c - 1);\n                }\n                // ArrowDown 40\n                else if (e.keyCode === 40) {\n                    setCand(c + 1 === list.length ? 0 : c + 1);\n                }\n            }\n        }\n    }, [setCand, cand, list, handler]);\n    React.useLayoutEffect(() => setCand(0), [list]);\n    return Array.isArray(list) ? (React.createElement(\"ul\", Object.assign({ ref: ref }, (tabIndex !== undefined ? { tabIndex: props.tabIndex } : {}), { className: \"search-control-info-list\", onKeyDown: arrowKeyHandler }), list.map((item, i) => (React.createElement(SearchInfoListItem, { value: i, candidate: cand, key: `${item.name}-${i}`, className: `search-control-info-list-item${i === activeIndex || item.checked ? \" active\" : \"\"}${cand === i ? \" candidate\" : \"\"}`, onClick: () => {\n            setCand(i);\n            handler(item, list, i);\n        }, onKeyDown: arrowKeyHandler }, item.name))))) : (React.createElement(\"span\", { className: \"search-control-info-span\" }, list));\n};\nSearchInfoListCore.displayName = \"SearchInfoList\";\nconst SearchInfoList = React.forwardRef(SearchInfoListCore);\nexport { SearchInfoList };\n"]},"metadata":{},"sourceType":"module"}