{"ast":null,"code":"function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nimport React, { forwardRef, useCallback, useContext, useEffect, useRef, useState } from 'react';\nimport styled, { ThemeContext } from 'styled-components';\nimport { selectedStyle, setFocusWithoutScroll } from '../../utils';\nimport { defaultProps } from '../../default-props';\nimport { Box } from '../Box';\nimport { Button } from '../Button';\nimport { InfiniteScroll } from '../InfiniteScroll';\nimport { Keyboard } from '../Keyboard';\nimport { Text } from '../Text';\nimport { TextInput } from '../TextInput';\nimport { StyledContainer } from './StyledSelect';\nimport { applyKey } from './utils'; // position relative is so scroll can be managed correctly\n\nvar OptionsBox = styled.div.withConfig({\n  displayName: \"SelectContainer__OptionsBox\",\n  componentId: \"sc-1wi0ul8-0\"\n})([\"position:relative;scroll-behavior:smooth;overflow:auto;outline:none;\"]);\nvar OptionBox = styled(Box).withConfig({\n  displayName: \"SelectContainer__OptionBox\",\n  componentId: \"sc-1wi0ul8-1\"\n})([\"\", \"\"], function (props) {\n  return props.selected && selectedStyle;\n});\nvar SelectOption = styled(Button).withConfig({\n  displayName: \"SelectContainer__SelectOption\",\n  componentId: \"sc-1wi0ul8-2\"\n})([\"display:block;width:100%;\"]);\nvar SelectContainer = /*#__PURE__*/forwardRef(function (_ref, ref) {\n  var _ref$children = _ref.children,\n      children = _ref$children === void 0 ? null : _ref$children,\n      disabled = _ref.disabled,\n      disabledKey = _ref.disabledKey,\n      dropHeight = _ref.dropHeight,\n      _ref$emptySearchMessa = _ref.emptySearchMessage,\n      emptySearchMessage = _ref$emptySearchMessa === void 0 ? 'No matches found' : _ref$emptySearchMessa,\n      id = _ref.id,\n      labelKey = _ref.labelKey,\n      multiple = _ref.multiple,\n      onChange = _ref.onChange,\n      onKeyDown = _ref.onKeyDown,\n      onMore = _ref.onMore,\n      onSearch = _ref.onSearch,\n      optionIndexesInValue = _ref.optionIndexesInValue,\n      options = _ref.options,\n      searchPlaceholder = _ref.searchPlaceholder,\n      selected = _ref.selected,\n      _ref$value = _ref.value,\n      value = _ref$value === void 0 ? '' : _ref$value,\n      valueKey = _ref.valueKey,\n      _ref$replace = _ref.replace,\n      replace = _ref$replace === void 0 ? true : _ref$replace;\n  var theme = useContext(ThemeContext) || defaultProps.theme;\n\n  var _useState = useState(),\n      search = _useState[0],\n      setSearch = _useState[1];\n\n  var _useState2 = useState(-1),\n      activeIndex = _useState2[0],\n      setActiveIndex = _useState2[1];\n\n  var _useState3 = useState(),\n      keyboardNavigation = _useState3[0],\n      setKeyboardNavigation = _useState3[1];\n\n  var searchRef = useRef();\n  var optionsRef = useRef(); // adjust activeIndex when options change\n\n  useEffect(function () {\n    if (activeIndex === -1 && search && optionIndexesInValue.length) {\n      setActiveIndex(optionIndexesInValue[0]);\n    }\n  }, [activeIndex, optionIndexesInValue, search]); // set initial focus\n\n  useEffect(function () {\n    // need to wait for Drop to be ready\n    var timer = setTimeout(function () {\n      var optionsNode = optionsRef.current;\n\n      if (onSearch) {\n        var searchInput = searchRef.current;\n\n        if (searchInput && searchInput.focus) {\n          setFocusWithoutScroll(searchInput);\n        }\n      } else if (optionsNode) {\n        setFocusWithoutScroll(optionsNode);\n      }\n    }, 100);\n    return function () {\n      return clearTimeout(timer);\n    };\n  }, [onSearch]); // clear keyboardNavigation after a while\n\n  useEffect(function () {\n    if (keyboardNavigation) {\n      // 100ms was empirically determined\n      var timer = setTimeout(function () {\n        return setKeyboardNavigation(false);\n      }, 100);\n      return function () {\n        return clearTimeout(timer);\n      };\n    }\n\n    return undefined;\n  }, [keyboardNavigation]);\n  var optionLabel = useCallback(function (index) {\n    return applyKey(options[index], labelKey);\n  }, [labelKey, options]);\n  var optionValue = useCallback(function (index) {\n    return applyKey(options[index], valueKey);\n  }, [options, valueKey]);\n  var isDisabled = useCallback(function (index) {\n    var option = options[index];\n    var result;\n\n    if (disabledKey) {\n      result = applyKey(option, disabledKey);\n    } else if (Array.isArray(disabled)) {\n      if (typeof disabled[0] === 'number') {\n        result = disabled.indexOf(index) !== -1;\n      } else {\n        var optionVal = optionValue(index);\n        result = disabled.indexOf(optionVal) !== -1;\n      }\n    }\n\n    return result;\n  }, [disabled, disabledKey, options, optionValue]);\n  var isSelected = useCallback(function (index) {\n    var result;\n\n    if (selected) {\n      // deprecated in favor of value\n      result = selected.indexOf(index) !== -1;\n    } else {\n      var optionVal = optionValue(index);\n\n      if (Array.isArray(value)) {\n        if (value.length === 0) {\n          result = false;\n        } else if (typeof value[0] !== 'object') {\n          result = value.indexOf(optionVal) !== -1;\n        } else if (valueKey) {\n          result = value.some(function (valueItem) {\n            var valueValue = typeof valueKey === 'function' ? valueKey(valueItem) : valueItem[valueKey];\n            return valueValue === optionVal;\n          });\n        }\n      } else if (valueKey && typeof value === 'object') {\n        var valueValue = typeof valueKey === 'function' ? valueKey(value) : value[valueKey];\n        result = valueValue === optionVal;\n      } else {\n        result = value === optionVal;\n      }\n    }\n\n    return result;\n  }, [optionValue, selected, value, valueKey]);\n  var selectOption = useCallback(function (index) {\n    return function (event) {\n      if (onChange) {\n        var nextValue;\n        var nextSelected;\n\n        if (multiple) {\n          var nextOptionIndexesInValue = optionIndexesInValue.slice(0);\n          var valueIndex = optionIndexesInValue.indexOf(index);\n\n          if (valueIndex === -1) {\n            nextOptionIndexesInValue.push(index);\n          } else {\n            nextOptionIndexesInValue.splice(valueIndex, 1);\n          }\n\n          nextValue = nextOptionIndexesInValue.map(function (i) {\n            return valueKey && valueKey.reduce ? applyKey(options[i], valueKey) : options[i];\n          });\n          nextSelected = nextOptionIndexesInValue;\n        } else {\n          nextValue = valueKey && valueKey.reduce ? applyKey(options[index], valueKey) : options[index];\n          nextSelected = index;\n        }\n\n        onChange(event, {\n          option: options[index],\n          value: nextValue,\n          selected: nextSelected\n        });\n      }\n    };\n  }, [multiple, onChange, optionIndexesInValue, options, valueKey]);\n  var onNextOption = useCallback(function (event) {\n    event.preventDefault();\n    var nextActiveIndex = activeIndex + 1;\n\n    while (nextActiveIndex < options.length && isDisabled(nextActiveIndex)) {\n      nextActiveIndex += 1;\n    }\n\n    if (nextActiveIndex !== options.length) {\n      setActiveIndex(nextActiveIndex);\n      setKeyboardNavigation(true);\n    }\n  }, [activeIndex, isDisabled, options]);\n  var onPreviousOption = useCallback(function (event) {\n    event.preventDefault();\n    var nextActiveIndex = activeIndex - 1;\n\n    while (nextActiveIndex >= 0 && isDisabled(nextActiveIndex)) {\n      nextActiveIndex -= 1;\n    }\n\n    if (nextActiveIndex >= 0) {\n      setActiveIndex(nextActiveIndex);\n      setKeyboardNavigation(true);\n    }\n  }, [activeIndex, isDisabled]);\n  var onActiveOption = useCallback(function (index) {\n    return function () {\n      if (!keyboardNavigation) setActiveIndex(index);\n    };\n  }, [keyboardNavigation]);\n  var onSelectOption = useCallback(function (event) {\n    if (activeIndex >= 0) {\n      event.preventDefault(); // prevent submitting forms\n\n      selectOption(activeIndex)(event);\n    }\n  }, [activeIndex, selectOption]);\n  var customSearchInput = theme.select.searchInput;\n  var SelectTextInput = customSearchInput || TextInput;\n  var selectOptionsStyle = theme.select.options ? _extends({}, theme.select.options.box, theme.select.options.container) : {};\n  return /*#__PURE__*/React.createElement(Keyboard, {\n    onEnter: onSelectOption,\n    onUp: onPreviousOption,\n    onDown: onNextOption,\n    onKeyDown: onKeyDown\n  }, /*#__PURE__*/React.createElement(StyledContainer, {\n    ref: ref,\n    as: Box,\n    id: id ? id + \"__select-drop\" : undefined,\n    dropHeight: dropHeight\n  }, onSearch && /*#__PURE__*/React.createElement(Box, {\n    pad: !customSearchInput ? 'xsmall' : undefined,\n    flex: false\n  }, /*#__PURE__*/React.createElement(SelectTextInput, {\n    focusIndicator: !customSearchInput,\n    size: \"small\",\n    ref: searchRef,\n    type: \"search\",\n    value: search || '',\n    placeholder: searchPlaceholder,\n    onChange: function onChange(event) {\n      var nextSearch = event.target.value;\n      setSearch(nextSearch);\n      setActiveIndex(-1);\n      onSearch(nextSearch);\n    }\n  })), /*#__PURE__*/React.createElement(OptionsBox, {\n    role: \"menubar\",\n    tabIndex: \"-1\",\n    ref: optionsRef\n  }, options.length > 0 ? /*#__PURE__*/React.createElement(InfiniteScroll, {\n    items: options,\n    step: theme.select.step,\n    onMore: onMore,\n    replace: replace,\n    show: activeIndex !== -1 ? activeIndex : undefined\n  }, function (option, index, optionRef) {\n    var optionDisabled = isDisabled(index);\n    var optionSelected = isSelected(index);\n    var optionActive = activeIndex === index; // Determine whether the label is done as a child or\n    // as an option Button kind property.\n\n    var child;\n    if (children) child = children(option, index, options, {\n      active: optionActive,\n      disabled: optionDisabled,\n      selected: optionSelected\n    });else if (theme.select.options) child = /*#__PURE__*/React.createElement(OptionBox, _extends({}, selectOptionsStyle, {\n      selected: optionSelected\n    }), /*#__PURE__*/React.createElement(Text, theme.select.options.text, optionLabel(index))); // if we have a child, turn on plain, and hoverIndicator\n\n    return /*#__PURE__*/React.createElement(SelectOption // eslint-disable-next-line react/no-array-index-key\n    , {\n      key: index,\n      ref: optionRef,\n      tabIndex: \"-1\",\n      role: \"menuitem\",\n      plain: !child ? undefined : true,\n      align: \"start\",\n      kind: !child ? 'option' : undefined,\n      hoverIndicator: !child ? undefined : 'background',\n      label: !child ? optionLabel(index) : undefined,\n      disabled: optionDisabled || undefined,\n      active: optionActive,\n      selected: optionSelected,\n      option: option,\n      onMouseOver: !optionDisabled ? onActiveOption(index) : undefined,\n      onClick: !optionDisabled ? selectOption(index) : undefined\n    }, child);\n  }) : /*#__PURE__*/React.createElement(SelectOption, {\n    key: \"search_empty\",\n    tabIndex: \"-1\",\n    role: \"menuitem\",\n    hoverIndicator: \"background\",\n    disabled: true,\n    option: emptySearchMessage\n  }, /*#__PURE__*/React.createElement(OptionBox, selectOptionsStyle, /*#__PURE__*/React.createElement(Text, theme.select.container.text, emptySearchMessage))))));\n});\nexport { SelectContainer };","map":{"version":3,"sources":["/Users/erwanbeguin/Documents/Developper/ynov/dataviz/node_modules/grommet/es6/components/Select/SelectContainer.js"],"names":["_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","React","forwardRef","useCallback","useContext","useEffect","useRef","useState","styled","ThemeContext","selectedStyle","setFocusWithoutScroll","defaultProps","Box","Button","InfiniteScroll","Keyboard","Text","TextInput","StyledContainer","applyKey","OptionsBox","div","withConfig","displayName","componentId","OptionBox","props","selected","SelectOption","SelectContainer","_ref","ref","_ref$children","children","disabled","disabledKey","dropHeight","_ref$emptySearchMessa","emptySearchMessage","id","labelKey","multiple","onChange","onKeyDown","onMore","onSearch","optionIndexesInValue","options","searchPlaceholder","_ref$value","value","valueKey","_ref$replace","replace","theme","_useState","search","setSearch","_useState2","activeIndex","setActiveIndex","_useState3","keyboardNavigation","setKeyboardNavigation","searchRef","optionsRef","timer","setTimeout","optionsNode","current","searchInput","focus","clearTimeout","undefined","optionLabel","index","optionValue","isDisabled","option","result","Array","isArray","indexOf","optionVal","isSelected","some","valueItem","valueValue","selectOption","event","nextValue","nextSelected","nextOptionIndexesInValue","slice","valueIndex","push","splice","map","reduce","onNextOption","preventDefault","nextActiveIndex","onPreviousOption","onActiveOption","onSelectOption","customSearchInput","select","SelectTextInput","selectOptionsStyle","box","container","createElement","onEnter","onUp","onDown","as","pad","flex","focusIndicator","size","type","placeholder","nextSearch","role","tabIndex","items","step","show","optionRef","optionDisabled","optionSelected","optionActive","child","active","text","plain","align","kind","hoverIndicator","label","onMouseOver","onClick"],"mappings":"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","sourcesContent":["function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React, { forwardRef, useCallback, useContext, useEffect, useRef, useState } from 'react';\nimport styled, { ThemeContext } from 'styled-components';\nimport { selectedStyle, setFocusWithoutScroll } from '../../utils';\nimport { defaultProps } from '../../default-props';\nimport { Box } from '../Box';\nimport { Button } from '../Button';\nimport { InfiniteScroll } from '../InfiniteScroll';\nimport { Keyboard } from '../Keyboard';\nimport { Text } from '../Text';\nimport { TextInput } from '../TextInput';\nimport { StyledContainer } from './StyledSelect';\nimport { applyKey } from './utils'; // position relative is so scroll can be managed correctly\n\nvar OptionsBox = styled.div.withConfig({\n  displayName: \"SelectContainer__OptionsBox\",\n  componentId: \"sc-1wi0ul8-0\"\n})([\"position:relative;scroll-behavior:smooth;overflow:auto;outline:none;\"]);\nvar OptionBox = styled(Box).withConfig({\n  displayName: \"SelectContainer__OptionBox\",\n  componentId: \"sc-1wi0ul8-1\"\n})([\"\", \"\"], function (props) {\n  return props.selected && selectedStyle;\n});\nvar SelectOption = styled(Button).withConfig({\n  displayName: \"SelectContainer__SelectOption\",\n  componentId: \"sc-1wi0ul8-2\"\n})([\"display:block;width:100%;\"]);\nvar SelectContainer = /*#__PURE__*/forwardRef(function (_ref, ref) {\n  var _ref$children = _ref.children,\n      children = _ref$children === void 0 ? null : _ref$children,\n      disabled = _ref.disabled,\n      disabledKey = _ref.disabledKey,\n      dropHeight = _ref.dropHeight,\n      _ref$emptySearchMessa = _ref.emptySearchMessage,\n      emptySearchMessage = _ref$emptySearchMessa === void 0 ? 'No matches found' : _ref$emptySearchMessa,\n      id = _ref.id,\n      labelKey = _ref.labelKey,\n      multiple = _ref.multiple,\n      onChange = _ref.onChange,\n      onKeyDown = _ref.onKeyDown,\n      onMore = _ref.onMore,\n      onSearch = _ref.onSearch,\n      optionIndexesInValue = _ref.optionIndexesInValue,\n      options = _ref.options,\n      searchPlaceholder = _ref.searchPlaceholder,\n      selected = _ref.selected,\n      _ref$value = _ref.value,\n      value = _ref$value === void 0 ? '' : _ref$value,\n      valueKey = _ref.valueKey,\n      _ref$replace = _ref.replace,\n      replace = _ref$replace === void 0 ? true : _ref$replace;\n  var theme = useContext(ThemeContext) || defaultProps.theme;\n\n  var _useState = useState(),\n      search = _useState[0],\n      setSearch = _useState[1];\n\n  var _useState2 = useState(-1),\n      activeIndex = _useState2[0],\n      setActiveIndex = _useState2[1];\n\n  var _useState3 = useState(),\n      keyboardNavigation = _useState3[0],\n      setKeyboardNavigation = _useState3[1];\n\n  var searchRef = useRef();\n  var optionsRef = useRef(); // adjust activeIndex when options change\n\n  useEffect(function () {\n    if (activeIndex === -1 && search && optionIndexesInValue.length) {\n      setActiveIndex(optionIndexesInValue[0]);\n    }\n  }, [activeIndex, optionIndexesInValue, search]); // set initial focus\n\n  useEffect(function () {\n    // need to wait for Drop to be ready\n    var timer = setTimeout(function () {\n      var optionsNode = optionsRef.current;\n\n      if (onSearch) {\n        var searchInput = searchRef.current;\n\n        if (searchInput && searchInput.focus) {\n          setFocusWithoutScroll(searchInput);\n        }\n      } else if (optionsNode) {\n        setFocusWithoutScroll(optionsNode);\n      }\n    }, 100);\n    return function () {\n      return clearTimeout(timer);\n    };\n  }, [onSearch]); // clear keyboardNavigation after a while\n\n  useEffect(function () {\n    if (keyboardNavigation) {\n      // 100ms was empirically determined\n      var timer = setTimeout(function () {\n        return setKeyboardNavigation(false);\n      }, 100);\n      return function () {\n        return clearTimeout(timer);\n      };\n    }\n\n    return undefined;\n  }, [keyboardNavigation]);\n  var optionLabel = useCallback(function (index) {\n    return applyKey(options[index], labelKey);\n  }, [labelKey, options]);\n  var optionValue = useCallback(function (index) {\n    return applyKey(options[index], valueKey);\n  }, [options, valueKey]);\n  var isDisabled = useCallback(function (index) {\n    var option = options[index];\n    var result;\n\n    if (disabledKey) {\n      result = applyKey(option, disabledKey);\n    } else if (Array.isArray(disabled)) {\n      if (typeof disabled[0] === 'number') {\n        result = disabled.indexOf(index) !== -1;\n      } else {\n        var optionVal = optionValue(index);\n        result = disabled.indexOf(optionVal) !== -1;\n      }\n    }\n\n    return result;\n  }, [disabled, disabledKey, options, optionValue]);\n  var isSelected = useCallback(function (index) {\n    var result;\n\n    if (selected) {\n      // deprecated in favor of value\n      result = selected.indexOf(index) !== -1;\n    } else {\n      var optionVal = optionValue(index);\n\n      if (Array.isArray(value)) {\n        if (value.length === 0) {\n          result = false;\n        } else if (typeof value[0] !== 'object') {\n          result = value.indexOf(optionVal) !== -1;\n        } else if (valueKey) {\n          result = value.some(function (valueItem) {\n            var valueValue = typeof valueKey === 'function' ? valueKey(valueItem) : valueItem[valueKey];\n            return valueValue === optionVal;\n          });\n        }\n      } else if (valueKey && typeof value === 'object') {\n        var valueValue = typeof valueKey === 'function' ? valueKey(value) : value[valueKey];\n        result = valueValue === optionVal;\n      } else {\n        result = value === optionVal;\n      }\n    }\n\n    return result;\n  }, [optionValue, selected, value, valueKey]);\n  var selectOption = useCallback(function (index) {\n    return function (event) {\n      if (onChange) {\n        var nextValue;\n        var nextSelected;\n\n        if (multiple) {\n          var nextOptionIndexesInValue = optionIndexesInValue.slice(0);\n          var valueIndex = optionIndexesInValue.indexOf(index);\n\n          if (valueIndex === -1) {\n            nextOptionIndexesInValue.push(index);\n          } else {\n            nextOptionIndexesInValue.splice(valueIndex, 1);\n          }\n\n          nextValue = nextOptionIndexesInValue.map(function (i) {\n            return valueKey && valueKey.reduce ? applyKey(options[i], valueKey) : options[i];\n          });\n          nextSelected = nextOptionIndexesInValue;\n        } else {\n          nextValue = valueKey && valueKey.reduce ? applyKey(options[index], valueKey) : options[index];\n          nextSelected = index;\n        }\n\n        onChange(event, {\n          option: options[index],\n          value: nextValue,\n          selected: nextSelected\n        });\n      }\n    };\n  }, [multiple, onChange, optionIndexesInValue, options, valueKey]);\n  var onNextOption = useCallback(function (event) {\n    event.preventDefault();\n    var nextActiveIndex = activeIndex + 1;\n\n    while (nextActiveIndex < options.length && isDisabled(nextActiveIndex)) {\n      nextActiveIndex += 1;\n    }\n\n    if (nextActiveIndex !== options.length) {\n      setActiveIndex(nextActiveIndex);\n      setKeyboardNavigation(true);\n    }\n  }, [activeIndex, isDisabled, options]);\n  var onPreviousOption = useCallback(function (event) {\n    event.preventDefault();\n    var nextActiveIndex = activeIndex - 1;\n\n    while (nextActiveIndex >= 0 && isDisabled(nextActiveIndex)) {\n      nextActiveIndex -= 1;\n    }\n\n    if (nextActiveIndex >= 0) {\n      setActiveIndex(nextActiveIndex);\n      setKeyboardNavigation(true);\n    }\n  }, [activeIndex, isDisabled]);\n  var onActiveOption = useCallback(function (index) {\n    return function () {\n      if (!keyboardNavigation) setActiveIndex(index);\n    };\n  }, [keyboardNavigation]);\n  var onSelectOption = useCallback(function (event) {\n    if (activeIndex >= 0) {\n      event.preventDefault(); // prevent submitting forms\n\n      selectOption(activeIndex)(event);\n    }\n  }, [activeIndex, selectOption]);\n  var customSearchInput = theme.select.searchInput;\n  var SelectTextInput = customSearchInput || TextInput;\n  var selectOptionsStyle = theme.select.options ? _extends({}, theme.select.options.box, theme.select.options.container) : {};\n  return /*#__PURE__*/React.createElement(Keyboard, {\n    onEnter: onSelectOption,\n    onUp: onPreviousOption,\n    onDown: onNextOption,\n    onKeyDown: onKeyDown\n  }, /*#__PURE__*/React.createElement(StyledContainer, {\n    ref: ref,\n    as: Box,\n    id: id ? id + \"__select-drop\" : undefined,\n    dropHeight: dropHeight\n  }, onSearch && /*#__PURE__*/React.createElement(Box, {\n    pad: !customSearchInput ? 'xsmall' : undefined,\n    flex: false\n  }, /*#__PURE__*/React.createElement(SelectTextInput, {\n    focusIndicator: !customSearchInput,\n    size: \"small\",\n    ref: searchRef,\n    type: \"search\",\n    value: search || '',\n    placeholder: searchPlaceholder,\n    onChange: function onChange(event) {\n      var nextSearch = event.target.value;\n      setSearch(nextSearch);\n      setActiveIndex(-1);\n      onSearch(nextSearch);\n    }\n  })), /*#__PURE__*/React.createElement(OptionsBox, {\n    role: \"menubar\",\n    tabIndex: \"-1\",\n    ref: optionsRef\n  }, options.length > 0 ? /*#__PURE__*/React.createElement(InfiniteScroll, {\n    items: options,\n    step: theme.select.step,\n    onMore: onMore,\n    replace: replace,\n    show: activeIndex !== -1 ? activeIndex : undefined\n  }, function (option, index, optionRef) {\n    var optionDisabled = isDisabled(index);\n    var optionSelected = isSelected(index);\n    var optionActive = activeIndex === index; // Determine whether the label is done as a child or\n    // as an option Button kind property.\n\n    var child;\n    if (children) child = children(option, index, options, {\n      active: optionActive,\n      disabled: optionDisabled,\n      selected: optionSelected\n    });else if (theme.select.options) child = /*#__PURE__*/React.createElement(OptionBox, _extends({}, selectOptionsStyle, {\n      selected: optionSelected\n    }), /*#__PURE__*/React.createElement(Text, theme.select.options.text, optionLabel(index))); // if we have a child, turn on plain, and hoverIndicator\n\n    return /*#__PURE__*/React.createElement(SelectOption // eslint-disable-next-line react/no-array-index-key\n    , {\n      key: index,\n      ref: optionRef,\n      tabIndex: \"-1\",\n      role: \"menuitem\",\n      plain: !child ? undefined : true,\n      align: \"start\",\n      kind: !child ? 'option' : undefined,\n      hoverIndicator: !child ? undefined : 'background',\n      label: !child ? optionLabel(index) : undefined,\n      disabled: optionDisabled || undefined,\n      active: optionActive,\n      selected: optionSelected,\n      option: option,\n      onMouseOver: !optionDisabled ? onActiveOption(index) : undefined,\n      onClick: !optionDisabled ? selectOption(index) : undefined\n    }, child);\n  }) : /*#__PURE__*/React.createElement(SelectOption, {\n    key: \"search_empty\",\n    tabIndex: \"-1\",\n    role: \"menuitem\",\n    hoverIndicator: \"background\",\n    disabled: true,\n    option: emptySearchMessage\n  }, /*#__PURE__*/React.createElement(OptionBox, selectOptionsStyle, /*#__PURE__*/React.createElement(Text, theme.select.container.text, emptySearchMessage))))));\n});\nexport { SelectContainer };"]},"metadata":{},"sourceType":"module"}