{"ast":null,"code":"var _jsxFileName = \"/Users/erwanbeguin/Documents/Developper/ynov/dataviz/src/features/Map/MapBox.js\";\nimport React from \"react\";\nimport { Map, TileLayer, Marker, Popup } from \"react-leaflet\";\nimport \"./MapBox.css\";\nimport { Box, Button, Text } from \"grommet\";\nimport WMTS from \"ol/source/WMTS\";\nimport { containsCoordinate } from \"ol/extent\";\n\nconst MapBox = () => {\n  const [data, setData] = React.useState([]);\n  const [tile, setTile] = React.useState(\"osm\");\n  React.useEffect(() => {\n    fetch(\"https://opendata.paris.fr/api/records/1.0/search/?dataset=referentiel-archeologique-de-paris&q=&facet=code_postal&facet=nature_operation&facet=responsable_operation&facet=date_operation&facet=prehistoire&facet=protohistoire&facet=antiquite&facet=moyen_age&facet=temps_modernes&facet=epoque_contemporaine\").then(response => response.json()).then(data => setData(data.records));\n  }, []);\n  const ign_source = new WMTS({\n    url: \"https://wxs.ign.fr/pratique/geoportail/wmts\",\n    layer: \"GEOGRAPHICALGRIDSYSTEMS.MAPS\",\n    matrixSet: \"PM\",\n    format: \"image/jpeg\",\n    projection: \"EPSG:3857\",\n    style: \"normal\",\n    attributions: '<a href=\"http://www.ign.fr\" target=\"_blank\">' + '<img src=\"https://wxs.ign.fr/static/logos/IGN/IGN.gif\" title=\"Institut national de l\\'' + 'information géographique et forestière\" alt=\"IGN\"></a>'\n  });\n  return /*#__PURE__*/React.createElement(Box, {\n    height: \"medium\",\n    width: \"large\",\n    margin: \"small\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Box, {\n    margin: \"small\",\n    direction: \"row\",\n    gap: \"small\",\n    align: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    onClick: () => setTile(\"osm\"),\n    label: \"OSM\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    onClick: () => setTile(\"ign\"),\n    label: \"IGN\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(Map, {\n    center: [48.847, 2.343],\n    zoom: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 7\n    }\n  }, tile === \"osm\" ? /*#__PURE__*/React.createElement(TileLayer, {\n    url: \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 11\n    }\n  }) : /*#__PURE__*/React.createElement(TileLayer, {\n    url: ign_source,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 11\n    }\n  }), data.map(item => /*#__PURE__*/React.createElement(Marker, {\n    position: item.fields.geo_point_2d,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Popup, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Box, {\n    margin: \"small\",\n    overflow: \"scroll\",\n    height: \"small\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Text, {\n    size: \"small\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 17\n    }\n  }, item.fields.geo_point_2d), /*#__PURE__*/React.createElement(Text, {\n    size: \"small\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 17\n    }\n  }, item.fields.synthese)))))));\n};\n\nexport default MapBox;","map":{"version":3,"sources":["/Users/erwanbeguin/Documents/Developper/ynov/dataviz/src/features/Map/MapBox.js"],"names":["React","Map","TileLayer","Marker","Popup","Box","Button","Text","WMTS","containsCoordinate","MapBox","data","setData","useState","tile","setTile","useEffect","fetch","then","response","json","records","ign_source","url","layer","matrixSet","format","projection","style","attributions","map","item","fields","geo_point_2d","synthese"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { Map, TileLayer, Marker, Popup } from \"react-leaflet\";\nimport \"./MapBox.css\";\nimport { Box, Button, Text } from \"grommet\";\nimport WMTS from \"ol/source/WMTS\";\nimport { containsCoordinate } from \"ol/extent\";\n\nconst MapBox = () => {\n  const [data, setData] = React.useState([]);\n  const [tile, setTile] = React.useState(\"osm\");\n\n  React.useEffect(() => {\n    fetch(\n      \"https://opendata.paris.fr/api/records/1.0/search/?dataset=referentiel-archeologique-de-paris&q=&facet=code_postal&facet=nature_operation&facet=responsable_operation&facet=date_operation&facet=prehistoire&facet=protohistoire&facet=antiquite&facet=moyen_age&facet=temps_modernes&facet=epoque_contemporaine\"\n    )\n      .then((response) => response.json())\n      .then((data) => setData(data.records));\n  }, []);\n\n  const ign_source = new WMTS({\n    url: \"https://wxs.ign.fr/pratique/geoportail/wmts\",\n    layer: \"GEOGRAPHICALGRIDSYSTEMS.MAPS\",\n    matrixSet: \"PM\",\n    format: \"image/jpeg\",\n    projection: \"EPSG:3857\",\n    style: \"normal\",\n    attributions:\n      '<a href=\"http://www.ign.fr\" target=\"_blank\">' +\n      '<img src=\"https://wxs.ign.fr/static/logos/IGN/IGN.gif\" title=\"Institut national de l\\'' +\n      'information géographique et forestière\" alt=\"IGN\"></a>',\n  });\n\n  return (\n    <Box height=\"medium\" width=\"large\" margin=\"small\">\n      <Box margin=\"small\" direction=\"row\" gap=\"small\" align=\"center\">\n        <Button onClick={() => setTile(\"osm\")} label=\"OSM\"></Button>\n        <Button onClick={() => setTile(\"ign\")} label=\"IGN\"></Button>\n      </Box>\n      <Map center={[48.847, 2.343]} zoom={12}>\n        {tile === \"osm\" ? (\n          <TileLayer url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\" />\n        ) : (\n          <TileLayer url={ign_source} />\n        )}\n\n        {data.map((item) => (\n          <Marker position={item.fields.geo_point_2d}>\n            <Popup>\n              <Box margin=\"small\" overflow=\"scroll\" height=\"small\">\n                <Text size=\"small\">{item.fields.geo_point_2d}</Text>\n                <Text size=\"small\">{item.fields.synthese}</Text>\n              </Box>\n            </Popup>\n          </Marker>\n        ))}\n      </Map>\n    </Box>\n  );\n};\n\nexport default MapBox;\n"]},"metadata":{},"sourceType":"module"}